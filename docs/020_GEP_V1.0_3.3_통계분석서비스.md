# GEP V1.0 통계 분석 서비스 설계

## 📋 개요
**General Exam Platform (GEP) V1.0** - 통계 분석 서비스 설계
**기준**: ACIU S4 검증된 통계 시스템 + GEP 요구사항
**목표**: 등록시점 기반의 정확하고 실용적인 통계 분석 시스템

---

## 🎯 핵심 설계 원칙

### **ACIU S4 검증된 통계 시스템 패턴 적용**
- **등록시점 기반 통계**: 모든 통계의 출발점은 사용자 등록일
- **문제풀이 시점 데이터 생성**: 모든 데이터는 문제 풀이 순간에 생성
- **중앙 아키텍처 기반**: 모든 통계 데이터는 중앙에서 관리
- **이벤트 데이터베이스**: 별도의 이벤트 DB로 모든 활동 기록

### **GEP 특화 요구사항**
- **범용 플랫폼**: 다양한 자격시험에 적용 가능한 통계 시스템
- **3단계 서비스 레벨**: FREE, PREMIUM, PRO별 차별화된 통계 제공
- **실시간 업데이트**: 문제 풀이 즉시 모든 통계 반영
- **확장 가능한 구조**: 새로운 통계 유형 쉽게 추가

---

## 📊 통계 시스템 아키텍처

### **1. 핵심 데이터 플로우**

#### **통계 데이터 생성 및 흐름**
```
사용자 등록 → 통계 데이터 초기화 → 문제 풀이 → 
이벤트 데이터 생성 → 중앙 아키텍처 저장 → 
다양한 통계 계산 → UI 실시간 업데이트
```

#### **등록시점 기반 통계 초기화**
```javascript
class StatisticsInitializer {
    // 사용자 등록 시 통계 데이터 초기화
    static initializeUserStatistics(userId, registrationDate) {
        const initialStatistics = {
            userId: userId,
            registrationDate: registrationDate,
            examDate: null,
            
            // 기본 통계 데이터
            basicStats: {
                totalQuestionsAttempted: 0,
                totalCorrectAnswers: 0,
                accuracyRate: 0,
                studyDays: 0,
                lastStudyDate: null
            },
            
            // 일별 통계 데이터
            dailyStats: {},
            
            // 과목별 통계 데이터
            subjectStats: {
                '관계법령': { attempted: 0, correct: 0, accuracy: 0 },
                '손보1부': { attempted: 0, correct: 0, accuracy: 0 },
                '손보2부': { attempted: 0, correct: 0, accuracy: 0 }
            },
            
            // 문제별 상세 통계
            questionStats: {},
            
            // 학습 패턴 분석
            learningPatterns: {
                studyTimeDistribution: {},
                consecutiveCorrectAnswers: 0,
                longestStudySession: 0,
                averageStudyTime: 0
            },
            
            // 예상 점수 및 합격 확률
            predictions: {
                estimatedScore: 0,
                passProbability: 0,
                weakSubjects: [],
                recommendedFocus: []
            }
        };
        
        // LocalStorage에 저장
        localStorage.setItem(`gep_user_${userId}_statistics`, JSON.stringify(initialStatistics));
        
        // 중앙 아키텍처에 등록
        CentralDataManager.registerUserStatistics(userId, initialStatistics);
        
        return initialStatistics;
    }
}
```

### **2. 이벤트 데이터베이스 설계**

#### **EventDatabase 클래스**
```javascript
class EventDatabase {
    // 문제 풀이 이벤트 저장
    static recordQuestionEvent(eventData) {
        const event = {
            id: this.generateEventId(),
            userId: eventData.userId,
            eventType: 'QUESTION_ATTEMPTED',
            timestamp: new Date().toISOString(),
            
            // 문제 정보
            questionId: eventData.questionId,
            questionType: eventData.questionType,
            subject: eventData.subject,
            roundNumber: eventData.roundNumber,
            
            // 사용자 응답
            userAnswer: eventData.userAnswer,
            correctAnswer: eventData.correctAnswer,
            isCorrect: eventData.isCorrect,
            
            // 시간 정보
            responseTime: eventData.responseTime, // 밀리초
            sessionDuration: eventData.sessionDuration,
            
            // 누적 정보
            cumulativeAttempts: eventData.cumulativeAttempts,
            cumulativeCorrect: eventData.cumulativeCorrect,
            cumulativeAccuracy: eventData.cumulativeAccuracy,
            
            // 컨텍스트 정보
            studyMode: eventData.studyMode, // 'basic', 'subject', 'personalized'
            deviceInfo: eventData.deviceInfo,
            sessionId: eventData.sessionId
        };
        
        // 이벤트 DB에 저장
        this.saveEvent(event);
        
        // 중앙 아키텍처에 전송
        CentralDataManager.processEvent(event);
        
        return event;
    }
    
    // 이벤트 조회 (통계 계산용)
    static getEventsByUser(userId, filters = {}) {
        const events = this.loadUserEvents(userId);
        
        // 필터 적용
        let filteredEvents = events;
        
        if (filters.dateRange) {
            filteredEvents = filteredEvents.filter(event => 
                event.timestamp >= filters.dateRange.start &&
                event.timestamp <= filters.dateRange.end
            );
        }
        
        if (filters.subject) {
            filteredEvents = filteredEvents.filter(event => 
                event.subject === filters.subject
            );
        }
        
        if (filters.eventType) {
            filteredEvents = filteredEvents.filter(event => 
                event.eventType === filters.eventType
            );
        }
        
        return filteredEvents;
    }
    
    // 통계 계산용 이벤트 집계
    static aggregateEvents(userId, aggregationType) {
        const events = this.getEventsByUser(userId);
        
        switch (aggregationType) {
            case 'daily':
                return this.aggregateByDay(events);
            case 'subject':
                return this.aggregateBySubject(events);
            case 'question':
                return this.aggregateByQuestion(events);
            case 'timeDistribution':
                return this.aggregateByTime(events);
            default:
                return events;
        }
    }
}
```

### **3. 중앙 아키텍처 기반 통계 관리**

#### **CentralStatisticsManager 클래스**
```javascript
class CentralStatisticsManager {
    // 문제 풀이 이벤트 처리
    static processQuestionEvent(event) {
        const userId = event.userId;
        
        // 1. 기본 통계 업데이트
        this.updateBasicStatistics(userId, event);
        
        // 2. 일별 통계 업데이트
        this.updateDailyStatistics(userId, event);
        
        // 3. 과목별 통계 업데이트
        this.updateSubjectStatistics(userId, event);
        
        // 4. 문제별 통계 업데이트
        this.updateQuestionStatistics(userId, event);
        
        // 5. 학습 패턴 분석
        this.updateLearningPatterns(userId, event);
        
        // 6. 예상 점수 재계산
        this.recalculatePredictions(userId);
        
        // 7. 실시간 UI 업데이트
        this.broadcastStatisticsUpdate(userId);
    }
    
    // 기본 통계 업데이트
    static updateBasicStatistics(userId, event) {
        const stats = this.getUserStatistics(userId);
        
        stats.basicStats.totalQuestionsAttempted++;
        if (event.isCorrect) {
            stats.basicStats.totalCorrectAnswers++;
        }
        
        stats.basicStats.accuracyRate = Math.round(
            (stats.basicStats.totalCorrectAnswers / stats.basicStats.totalQuestionsAttempted) * 100
        );
        
        // 학습 일수 계산
        const registrationDate = new Date(stats.registrationDate);
        const today = new Date();
        const studyDays = Math.ceil((today - registrationDate) / (1000 * 60 * 60 * 24));
        stats.basicStats.studyDays = Math.max(1, studyDays);
        
        // 마지막 학습일 업데이트
        stats.basicStats.lastStudyDate = event.timestamp;
        
        this.saveUserStatistics(userId, stats);
    }
    
    // 일별 통계 업데이트
    static updateDailyStatistics(userId, event) {
        const stats = this.getUserStatistics(userId);
        const eventDate = event.timestamp.split('T')[0];
        
        if (!stats.dailyStats[eventDate]) {
            stats.dailyStats[eventDate] = {
                questionsAttempted: 0,
                correctAnswers: 0,
                accuracy: 0,
                studyTime: 0,
                subjects: new Set()
            };
        }
        
        const dailyStats = stats.dailyStats[eventDate];
        dailyStats.questionsAttempted++;
        
        if (event.isCorrect) {
            dailyStats.correctAnswers++;
        }
        
        dailyStats.accuracy = Math.round(
            (dailyStats.correctAnswers / dailyStats.questionsAttempted) * 100
        );
        
        dailyStats.studyTime += event.responseTime || 0;
        dailyStats.subjects.add(event.subject);
        
        this.saveUserStatistics(userId, stats);
    }
    
    // 과목별 통계 업데이트
    static updateSubjectStatistics(userId, event) {
        const stats = this.getUserStatistics(userId);
        const subject = event.subject;
        
        if (!stats.subjectStats[subject]) {
            stats.subjectStats[subject] = { attempted: 0, correct: 0, accuracy: 0 };
        }
        
        const subjectStats = stats.subjectStats[subject];
        subjectStats.attempted++;
        
        if (event.isCorrect) {
            subjectStats.correct++;
        }
        
        subjectStats.accuracy = Math.round(
            (subjectStats.correct / subjectStats.attempted) * 100
        );
        
        this.saveUserStatistics(userId, stats);
    }
    
    // 문제별 통계 업데이트
    static updateQuestionStatistics(userId, event) {
        const stats = this.getUserStatistics(userId);
        const questionId = event.questionId;
        
        if (!stats.questionStats[questionId]) {
            stats.questionStats[questionId] = {
                attempts: 0,
                correct: 0,
                accuracy: 0,
                averageResponseTime: 0,
                lastAttempted: null
            };
        }
        
        const questionStats = stats.questionStats[questionId];
        questionStats.attempts++;
        
        if (event.isCorrect) {
            questionStats.correct++;
        }
        
        questionStats.accuracy = Math.round(
            (questionStats.correct / questionStats.attempts) * 100
        );
        
        // 평균 응답 시간 업데이트
        const totalTime = questionStats.averageResponseTime * (questionStats.attempts - 1) + (event.responseTime || 0);
        questionStats.averageResponseTime = Math.round(totalTime / questionStats.attempts);
        
        questionStats.lastAttempted = event.timestamp;
        
        this.saveUserStatistics(userId, stats);
    }
}
```

---

## 📈 통계 분석 서비스

### **1. 기본 통계 서비스 (FREE)**

#### **BasicStatisticsService 클래스**
```javascript
class BasicStatisticsService {
    // 홈페이지 기본 통계
    static getHomeStatistics(userId) {
        const stats = CentralStatisticsManager.getUserStatistics(userId);
        
        return {
            totalQuestions: stats.basicStats.totalQuestionsAttempted,
            accuracy: stats.basicStats.accuracyRate,
            studyDays: stats.basicStats.studyDays,
            todayQuestions: this.getTodayQuestions(userId),
            todayAccuracy: this.getTodayAccuracy(userId),
            dDay: this.calculateDDay(stats.examDate)
        };
    }
    
    // 오늘 학습 현황
    static getTodayStatistics(userId) {
        const today = new Date().toISOString().split('T')[0];
        const stats = CentralStatisticsManager.getUserStatistics(userId);
        const dailyStats = stats.dailyStats[today] || { questionsAttempted: 0, correctAnswers: 0, accuracy: 0 };
        
        return {
            questionsAttempted: dailyStats.questionsAttempted,
            correctAnswers: dailyStats.correctAnswers,
            accuracy: dailyStats.accuracy,
            studyTime: dailyStats.studyTime || 0
        };
    }
    
    // 과목별 기본 통계
    static getSubjectStatistics(userId) {
        const stats = CentralStatisticsManager.getUserStatistics(userId);
        
        return Object.entries(stats.subjectStats).map(([subject, data]) => ({
            subject: subject,
            attempted: data.attempted,
            correct: data.correct,
            accuracy: data.accuracy,
            progress: this.calculateSubjectProgress(userId, subject)
        }));
    }
}
```

### **2. 고급 통계 서비스 (PREMIUM)**

#### **AdvancedStatisticsService 클래스**
```javascript
class AdvancedStatisticsService {
    // 상세 학습 분석
    static getDetailedAnalysis(userId) {
        const events = EventDatabase.getEventsByUser(userId);
        
        return {
            timeDistribution: this.analyzeTimeDistribution(events),
            learningPatterns: this.analyzeLearningPatterns(events),
            weakPoints: this.identifyWeakPoints(userId),
            improvementTrends: this.analyzeImprovementTrends(events),
            studyEfficiency: this.calculateStudyEfficiency(events)
        };
    }
    
    // 시간대별 학습 패턴 분석
    static analyzeTimeDistribution(events) {
        const timeSlots = {
            '06-09': 0, '09-12': 0, '12-15': 0, '15-18': 0,
            '18-21': 0, '21-24': 0, '00-03': 0, '03-06': 0
        };
        
        events.forEach(event => {
            const hour = new Date(event.timestamp).getHours();
            let timeSlot;
            
            if (hour >= 6 && hour < 9) timeSlot = '06-09';
            else if (hour >= 9 && hour < 12) timeSlot = '09-12';
            else if (hour >= 12 && hour < 15) timeSlot = '12-15';
            else if (hour >= 15 && hour < 18) timeSlot = '15-18';
            else if (hour >= 18 && hour < 21) timeSlot = '18-21';
            else if (hour >= 21 && hour < 24) timeSlot = '21-24';
            else if (hour >= 0 && hour < 3) timeSlot = '00-03';
            else timeSlot = '03-06';
            
            timeSlots[timeSlot]++;
        });
        
        return timeSlots;
    }
    
    // 학습 패턴 분석
    static analyzeLearningPatterns(events) {
        const patterns = {
            consecutiveCorrect: 0,
            longestSession: 0,
            averageSessionLength: 0,
            preferredSubjects: [],
            studyIntensity: 'low' // low, medium, high
        };
        
        // 연속 정답 분석
        let currentStreak = 0;
        let maxStreak = 0;
        
        events.forEach(event => {
            if (event.isCorrect) {
                currentStreak++;
                maxStreak = Math.max(maxStreak, currentStreak);
            } else {
                currentStreak = 0;
            }
        });
        
        patterns.consecutiveCorrect = maxStreak;
        
        // 학습 세션 분석
        const sessions = this.groupIntoSessions(events);
        patterns.longestSession = Math.max(...sessions.map(s => s.length));
        patterns.averageSessionLength = Math.round(
            sessions.reduce((sum, session) => sum + session.length, 0) / sessions.length
        );
        
        return patterns;
    }
    
    // 취약점 식별
    static identifyWeakPoints(userId) {
        const stats = CentralStatisticsManager.getUserStatistics(userId);
        const weakPoints = [];
        
        // 과목별 취약점
        Object.entries(stats.subjectStats).forEach(([subject, data]) => {
            if (data.accuracy < 60 && data.attempted >= 10) {
                weakPoints.push({
                    type: 'subject',
                    name: subject,
                    accuracy: data.accuracy,
                    attempts: data.attempted,
                    priority: 'high'
                });
            }
        });
        
        // 문제별 취약점
        Object.entries(stats.questionStats).forEach(([questionId, data]) => {
            if (data.accuracy < 50 && data.attempts >= 3) {
                weakPoints.push({
                    type: 'question',
                    id: questionId,
                    accuracy: data.accuracy,
                    attempts: data.attempts,
                    priority: 'medium'
                });
            }
        });
        
        return weakPoints.sort((a, b) => {
            if (a.priority === 'high' && b.priority !== 'high') return -1;
            if (b.priority === 'high' && a.priority !== 'high') return 1;
            return b.accuracy - a.accuracy;
        });
    }
}
```

### **3. 전문 통계 서비스 (PRO)**

#### **ProfessionalStatisticsService 클래스**
```javascript
class ProfessionalStatisticsService {
    // 합격률 예측
    static predictPassProbability(userId) {
        const stats = CentralStatisticsManager.getUserStatistics(userId);
        const events = EventDatabase.getEventsByUser(userId);
        
        // 기본 점수 계산
        const baseScore = this.calculateBaseScore(stats);
        
        // 학습 패턴 보정
        const patternBonus = this.calculatePatternBonus(events);
        
        // 시간 관리 보정
        const timeManagementBonus = this.calculateTimeManagementBonus(events);
        
        // 최종 예상 점수
        const estimatedScore = Math.min(100, baseScore + patternBonus + timeManagementBonus);
        
        // 합격 확률 계산 (기준: 60점 이상)
        const passProbability = this.calculatePassProbability(estimatedScore);
        
        return {
            estimatedScore: Math.round(estimatedScore),
            passProbability: Math.round(passProbability),
            confidence: this.calculateConfidence(stats),
            factors: {
                baseScore: Math.round(baseScore),
                patternBonus: Math.round(patternBonus),
                timeManagementBonus: Math.round(timeManagementBonus)
            }
        };
    }
    
    // 맞춤형 학습 추천
    static getPersonalizedRecommendations(userId) {
        const weakPoints = AdvancedStatisticsService.identifyWeakPoints(userId);
        const stats = CentralStatisticsManager.getUserStatistics(userId);
        const predictions = this.predictPassProbability(userId);
        
        const recommendations = [];
        
        // 취약 과목 집중 학습
        const weakSubjects = weakPoints.filter(w => w.type === 'subject');
        if (weakSubjects.length > 0) {
            recommendations.push({
                type: 'focus_subject',
                subject: weakSubjects[0].name,
                reason: `정답률 ${weakSubjects[0].accuracy}%로 개선 필요`,
                priority: 'high',
                estimatedImprovement: this.estimateImprovement(weakSubjects[0])
            });
        }
        
        // 오답 문제 반복 학습
        const weakQuestions = weakPoints.filter(w => w.type === 'question');
        if (weakQuestions.length > 0) {
            recommendations.push({
                type: 'review_questions',
                questionIds: weakQuestions.slice(0, 10).map(w => w.id),
                reason: '정답률이 낮은 문제들 반복 학습',
                priority: 'medium',
                estimatedTime: weakQuestions.length * 2 // 문제당 2분
            });
        }
        
        // 학습 시간 조정
        const timeAnalysis = AdvancedStatisticsService.analyzeTimeDistribution(
            EventDatabase.getEventsByUser(userId)
        );
        const optimalTime = this.findOptimalStudyTime(timeAnalysis);
        
        if (optimalTime) {
            recommendations.push({
                type: 'adjust_schedule',
                optimalTime: optimalTime,
                reason: '학습 효율이 높은 시간대 활용',
                priority: 'low',
                expectedBenefit: '정답률 5-10% 향상 예상'
            });
        }
        
        return recommendations;
    }
    
    // 상세 성과 분석 리포트
    static generateDetailedReport(userId) {
        const stats = CentralStatisticsManager.getUserStatistics(userId);
        const events = EventDatabase.getEventsByUser(userId);
        const predictions = this.predictPassProbability(userId);
        const recommendations = this.getPersonalizedRecommendations(userId);
        
        return {
            summary: {
                totalStudyTime: this.calculateTotalStudyTime(events),
                averageDailyStudyTime: this.calculateAverageDailyStudyTime(events),
                totalQuestions: stats.basicStats.totalQuestionsAttempted,
                overallAccuracy: stats.basicStats.accuracyRate,
                studyDays: stats.basicStats.studyDays
            },
            
            trends: {
                weeklyProgress: this.calculateWeeklyProgress(events),
                accuracyTrend: this.calculateAccuracyTrend(events),
                studyIntensityTrend: this.calculateStudyIntensityTrend(events)
            },
            
            predictions: predictions,
            recommendations: recommendations,
            
            detailedAnalysis: {
                subjectBreakdown: this.getSubjectBreakdown(stats),
                timeAnalysis: AdvancedStatisticsService.analyzeTimeDistribution(events),
                learningPatterns: AdvancedStatisticsService.analyzeLearningPatterns(events),
                weakPoints: AdvancedStatisticsService.identifyWeakPoints(userId)
            }
        };
    }
}
```

---

## 🔄 실시간 통계 업데이트

### **1. 실시간 UI 업데이트 시스템**

#### **RealtimeStatisticsUpdater 클래스**
```javascript
class RealtimeStatisticsUpdater {
    // 통계 업데이트 브로드캐스트
    static broadcastStatisticsUpdate(userId) {
        const stats = CentralStatisticsManager.getUserStatistics(userId);
        
        // 이벤트 발생
        EventBus.emit('statisticsUpdated', {
            userId: userId,
            timestamp: new Date().toISOString(),
            statistics: stats
        });
        
        // 모든 UI 컴포넌트 업데이트
        this.updateAllUIComponents(userId, stats);
    }
    
    // 모든 UI 컴포넌트 업데이트
    static updateAllUIComponents(userId, stats) {
        // 홈페이지 통계 업데이트
        this.updateHomeStatistics(stats);
        
        // 문제 풀이 페이지 통계 업데이트
        this.updateQuestionPageStatistics(stats);
        
        // 통계 페이지 업데이트
        this.updateStatisticsPage(stats);
        
        // 사이드바 통계 업데이트
        this.updateSidebarStatistics(stats);
    }
    
    // 홈페이지 통계 업데이트
    static updateHomeStatistics(stats) {
        const homeStats = document.querySelectorAll('.home-statistics');
        
        homeStats.forEach(element => {
            const statType = element.dataset.statType;
            
            switch (statType) {
                case 'totalQuestions':
                    element.textContent = stats.basicStats.totalQuestionsAttempted;
                    break;
                case 'accuracy':
                    element.textContent = `${stats.basicStats.accuracyRate}%`;
                    break;
                case 'studyDays':
                    element.textContent = stats.basicStats.studyDays;
                    break;
                case 'todayQuestions':
                    const today = new Date().toISOString().split('T')[0];
                    const todayStats = stats.dailyStats[today] || { questionsAttempted: 0 };
                    element.textContent = todayStats.questionsAttempted;
                    break;
            }
        });
    }
    
    // 진행률 바 업데이트
    static updateProgressBars(stats) {
        const progressBars = document.querySelectorAll('.progress-bar');
        
        progressBars.forEach(bar => {
            const barType = bar.dataset.progressType;
            
            switch (barType) {
                case 'overall':
                    const overallProgress = Math.round((stats.basicStats.totalQuestionsAttempted / 789) * 100);
                    bar.style.width = `${overallProgress}%`;
                    bar.textContent = `${overallProgress}%`;
                    break;
                case 'subject':
                    const subject = bar.dataset.subject;
                    const subjectStats = stats.subjectStats[subject];
                    if (subjectStats) {
                        const subjectProgress = Math.round((subjectStats.attempted / 200) * 100); // 예상 문제 수
                        bar.style.width = `${subjectProgress}%`;
                        bar.textContent = `${subjectProgress}%`;
                    }
                    break;
            }
        });
    }
}
```

---

## 🎯 구현 우선순위

### **Phase 1: 기본 통계 시스템 (3주)**
1. **등록시점 기반 통계 초기화**: 사용자 등록 시 통계 데이터 생성
2. **이벤트 데이터베이스**: 문제 풀이 이벤트 저장 시스템
3. **중앙 아키텍처**: 통계 데이터 중앙 관리 시스템
4. **기본 통계 서비스**: 홈페이지 기본 통계 표시

### **Phase 2: 고급 통계 시스템 (2주)**
1. **상세 분석 기능**: 시간대별, 패턴별 분석
2. **취약점 식별**: 과목별, 문제별 취약점 분석
3. **개선 트렌드**: 학습 진도 및 정답률 트렌드 분석
4. **고급 통계 UI**: 상세 통계 페이지 구현

### **Phase 3: 전문 통계 시스템 (2주)**
1. **합격률 예측**: AI 기반 합격 확률 계산
2. **맞춤형 추천**: 개인화된 학습 추천 시스템
3. **상세 리포트**: 종합 성과 분석 리포트
4. **실시간 업데이트**: 모든 통계 실시간 동기화

---

## 🧪 테스트 시나리오

### **1. 등록시점 기반 통계 테스트**
```javascript
describe('Registration-based Statistics Tests', () => {
    test('통계 초기화 시 등록일 기준 설정', () => {
        const userId = 'test_user';
        const registrationDate = '2024-12-01';
        
        const stats = StatisticsInitializer.initializeUserStatistics(userId, registrationDate);
        
        expect(stats.registrationDate).toBe(registrationDate);
        expect(stats.basicStats.totalQuestionsAttempted).toBe(0);
        expect(stats.basicStats.studyDays).toBe(1);
    });
    
    test('문제 풀이 후 통계 정확 업데이트', () => {
        const userId = 'test_user';
        const event = {
            userId: userId,
            questionId: 'Q001',
            isCorrect: true,
            timestamp: '2024-12-19T10:00:00Z'
        };
        
        CentralStatisticsManager.processQuestionEvent(event);
        const stats = CentralStatisticsManager.getUserStatistics(userId);
        
        expect(stats.basicStats.totalQuestionsAttempted).toBe(1);
        expect(stats.basicStats.totalCorrectAnswers).toBe(1);
        expect(stats.basicStats.accuracyRate).toBe(100);
    });
});
```

### **2. 이벤트 데이터베이스 테스트**
```javascript
describe('Event Database Tests', () => {
    test('문제 풀이 이벤트 정확 저장', () => {
        const eventData = {
            userId: 'test_user',
            questionId: 'Q001',
            userAnswer: 'A',
            correctAnswer: 'A',
            isCorrect: true,
            responseTime: 5000
        };
        
        const event = EventDatabase.recordQuestionEvent(eventData);
        
        expect(event.eventType).toBe('QUESTION_ATTEMPTED');
        expect(event.isCorrect).toBe(true);
        expect(event.responseTime).toBe(5000);
    });
    
    test('이벤트 필터링 및 집계', () => {
        const userId = 'test_user';
        const filters = {
            dateRange: {
                start: '2024-12-01',
                end: '2024-12-31'
            },
            subject: '관계법령'
        };
        
        const events = EventDatabase.getEventsByUser(userId, filters);
        const aggregated = EventDatabase.aggregateEvents(userId, 'daily');
        
        expect(events.length).toBeGreaterThan(0);
        expect(aggregated).toBeDefined();
    });
});
```

---

**작성자**: AI Assistant (Seo Daeri)  
**작성일**: 2024-12-19  
**기준**: ACIU S4 검증된 통계 시스템 + GEP 요구사항
