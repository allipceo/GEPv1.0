# GEP V1.0 - 1.2 서비스 레벨별 확장 준비

## 📋 개요
**General Exam Platform (GEP) V1.0**의 서비스 레벨별 확장 준비 방안

### 🎯 목표
- **유료 기능 활성화**: 무료 서비스 완성 후 유료 기능 단계적 활성화
- **과목별 필터링**: 기본 구조 구축으로 중급 서비스 준비
- **고급 통계**: UI 프레임 구축으로 고급 서비스 준비

---

## 🔧 유료 기능 활성화 스위치

### **1. 서비스 레벨 관리 시스템**

#### 1.1 서비스 레벨 정의
```javascript
// 서비스 레벨 상수 정의
const SERVICE_LEVELS = {
  FREE: 'free',
  PREMIUM: 'premium',  // 중급 서비스
  PRO: 'pro'          // 고급 서비스
};

// 서비스 레벨별 기능 정의
const FEATURE_MATRIX = {
  [SERVICE_LEVELS.FREE]: {
    roundBasedQuestions: true,
    basicStatistics: true,
    mobileOnly: true,
    subjectFiltering: false,
    detailedAnalytics: false,
    trueFalseQuestions: false,
    passRatePrediction: false
  },
  [SERVICE_LEVELS.PREMIUM]: {
    roundBasedQuestions: true,
    basicStatistics: true,
    mobileOnly: false,
    subjectFiltering: true,
    detailedAnalytics: true,
    trueFalseQuestions: false,
    passRatePrediction: false
  },
  [SERVICE_LEVELS.PRO]: {
    roundBasedQuestions: true,
    basicStatistics: true,
    mobileOnly: false,
    subjectFiltering: true,
    detailedAnalytics: true,
    trueFalseQuestions: true,
    passRatePrediction: true
  }
};
```

#### 1.2 서비스 레벨 확인 함수
```javascript
// 사용자 서비스 레벨 확인
const getUserServiceLevel = () => {
  const user = getCurrentUser();
  return user?.subscriptionLevel || SERVICE_LEVELS.FREE;
};

// 기능 사용 가능 여부 확인
const isFeatureAvailable = (featureName) => {
  const userLevel = getUserServiceLevel();
  return FEATURE_MATRIX[userLevel][featureName] || false;
};

// 기능별 접근 제어
const withFeatureCheck = (featureName, component) => {
  return (props) => {
    if (!isFeatureAvailable(featureName)) {
      return <UpgradePrompt feature={featureName} />;
    }
    return component(props);
  };
};
```

#### 1.3 업그레이드 프롬프트 컴포넌트
```javascript
const UpgradePrompt = ({ feature }) => {
  const featureNames = {
    subjectFiltering: '과목별 필터링',
    detailedAnalytics: '상세 통계',
    trueFalseQuestions: '진위형 문제',
    passRatePrediction: '합격률 예측'
  };

  return (
    <div className="upgrade-prompt">
      <div className="upgrade-content">
        <h3>프리미엄 기능</h3>
        <p>{featureNames[feature]} 기능을 사용하려면 업그레이드가 필요합니다.</p>
        <div className="upgrade-benefits">
          <ul>
            <li>과목별 맞춤 학습</li>
            <li>상세한 학습 분석</li>
            <li>데스크톱 접근</li>
          </ul>
        </div>
        <button className="upgrade-button" onClick={handleUpgrade}>
          업그레이드하기
        </button>
      </div>
    </div>
  );
};
```

---

## 📊 과목별 필터링 (기본 구조)

### **1. 과목 필터링 UI 구조**

#### 1.1 과목 선택 컴포넌트
```javascript
const SubjectFilter = ({ onSubjectChange, selectedSubject }) => {
  const subjects = [
    { id: 'all', name: '전체', count: 120 },
    { id: 'common', name: '관계법령', count: 40 },
    { id: 'sonbo1', name: '손보1부', count: 40 },
    { id: 'sonbo2', name: '손보2부', count: 40 }
  ];

  return (
    <div className="subject-filter">
      <h3>과목 선택</h3>
      <div className="subject-grid">
        {subjects.map(subject => (
          <button
            key={subject.id}
            className={`subject-button ${selectedSubject === subject.id ? 'active' : ''}`}
            onClick={() => onSubjectChange(subject.id)}
          >
            <span className="subject-name">{subject.name}</span>
            <span className="subject-count">({subject.count}문제)</span>
          </button>
        ))}
      </div>
    </div>
  );
};
```

#### 1.2 과목별 문제 필터링 로직
```javascript
// 과목별 문제 필터링 함수
const filterQuestionsBySubject = (questions, subjectId) => {
  if (subjectId === 'all') {
    return questions;
  }

  const subjectMapping = {
    'common': '관계법령',
    'sonbo1': '손보1부',
    'sonbo2': '손보2부'
  };

  return questions.filter(question => 
    question.layer1 === subjectMapping[subjectId]
  );
};

// 과목별 통계 계산
const calculateSubjectStatistics = (questions, subjectId) => {
  const filteredQuestions = filterQuestionsBySubject(questions, subjectId);
  
  return {
    totalQuestions: filteredQuestions.length,
    correctAnswers: filteredQuestions.filter(q => q.isCorrect).length,
    accuracy: filteredQuestions.length > 0 
      ? Math.round((filteredQuestions.filter(q => q.isCorrect).length / filteredQuestions.length) * 100)
      : 0
  };
};
```

### **2. 과목별 학습 모드**

#### 2.1 과목별 문제 풀이 화면
```javascript
const SubjectBasedLearning = () => {
  const [selectedSubject, setSelectedSubject] = useState('all');
  const [questions, setQuestions] = useState([]);
  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);

  const filteredQuestions = filterQuestionsBySubject(questions, selectedSubject);
  const currentQuestion = filteredQuestions[currentQuestionIndex];

  const handleSubjectChange = (subjectId) => {
    setSelectedSubject(subjectId);
    setCurrentQuestionIndex(0); // 과목 변경 시 첫 문제로 리셋
  };

  return (
    <div className="subject-learning">
      <SubjectFilter 
        onSubjectChange={handleSubjectChange}
        selectedSubject={selectedSubject}
      />
      
      {isFeatureAvailable('subjectFiltering') ? (
        <QuestionSolving 
          question={currentQuestion}
          onAnswerSelect={handleAnswerSelect}
          progress={`${currentQuestionIndex + 1} / ${filteredQuestions.length}`}
        />
      ) : (
        <UpgradePrompt feature="subjectFiltering" />
      )}
    </div>
  );
};
```

---

## 📈 고급 통계 (UI 프레임만)

### **1. 고급 통계 UI 구조**

#### 1.1 상세 통계 대시보드
```javascript
const AdvancedStatistics = () => {
  const [timeRange, setTimeRange] = useState('week');
  const [selectedSubject, setSelectedSubject] = useState('all');

  return (
    <div className="advanced-statistics">
      <div className="stats-header">
        <h2>상세 학습 분석</h2>
        <div className="stats-controls">
          <select value={timeRange} onChange={(e) => setTimeRange(e.target.value)}>
            <option value="week">최근 1주</option>
            <option value="month">최근 1개월</option>
            <option value="year">최근 1년</option>
          </select>
          <select value={selectedSubject} onChange={(e) => setSelectedSubject(e.target.value)}>
            <option value="all">전체 과목</option>
            <option value="common">관계법령</option>
            <option value="sonbo1">손보1부</option>
            <option value="sonbo2">손보2부</option>
          </select>
        </div>
      </div>

      {isFeatureAvailable('detailedAnalytics') ? (
        <div className="stats-content">
          <StatisticsGrid />
          <LearningTrendChart />
          <WeaknessAnalysis />
        </div>
      ) : (
        <UpgradePrompt feature="detailedAnalytics" />
      )}
    </div>
  );
};
```

#### 1.2 통계 그리드 컴포넌트
```javascript
const StatisticsGrid = () => {
  return (
    <div className="stats-grid">
      <div className="stat-card">
        <h3>총 학습 시간</h3>
        <div className="stat-value">24시간 30분</div>
        <div className="stat-change positive">+2시간 15분</div>
      </div>
      
      <div className="stat-card">
        <h3>평균 정답률</h3>
        <div className="stat-value">78.5%</div>
        <div className="stat-change positive">+3.2%</div>
      </div>
      
      <div className="stat-card">
        <h3>완료한 문제</h3>
        <div className="stat-value">1,247문제</div>
        <div className="stat-change positive">+45문제</div>
      </div>
      
      <div className="stat-card">
        <h3>연속 학습일</h3>
        <div className="stat-value">12일</div>
        <div className="stat-change neutral">유지</div>
      </div>
    </div>
  );
};
```

#### 1.3 학습 트렌드 차트 (UI 프레임)
```javascript
const LearningTrendChart = () => {
  return (
    <div className="trend-chart">
      <h3>학습 트렌드</h3>
      <div className="chart-container">
        <div className="chart-placeholder">
          <p>📊 학습 트렌드 차트</p>
          <p>일별/주별 정답률 변화</p>
          <p>과목별 성과 비교</p>
        </div>
      </div>
    </div>
  );
};
```

#### 1.4 취약점 분석 (UI 프레임)
```javascript
const WeaknessAnalysis = () => {
  return (
    <div className="weakness-analysis">
      <h3>취약점 분석</h3>
      <div className="weakness-content">
        <div className="weakness-item">
          <h4>정답률이 낮은 과목</h4>
          <ul>
            <li>손보2부: 65% (목표: 80%)</li>
            <li>관계법령: 72% (목표: 80%)</li>
          </ul>
        </div>
        
        <div className="weakness-item">
          <h4>자주 틀리는 문제 유형</h4>
          <ul>
            <li>계산 문제: 45% 정답률</li>
            <li>법령 해석: 68% 정답률</li>
          </ul>
        </div>
      </div>
    </div>
  );
};
```

---

## 🔄 단계별 활성화 전략

### **1. Phase 1: 무료 서비스 완성**
```javascript
// 무료 서비스 기능 활성화
const activateFreeFeatures = () => {
  return {
    roundBasedQuestions: true,
    basicStatistics: true,
    mobileOnly: true
  };
};
```

### **2. Phase 2: 중급 서비스 활성화**
```javascript
// 중급 서비스 기능 활성화
const activatePremiumFeatures = () => {
  return {
    ...activateFreeFeatures(),
    subjectFiltering: true,
    detailedAnalytics: true,
    mobileOnly: false
  };
};
```

### **3. Phase 3: 고급 서비스 활성화**
```javascript
// 고급 서비스 기능 활성화
const activateProFeatures = () => {
  return {
    ...activatePremiumFeatures(),
    trueFalseQuestions: true,
    passRatePrediction: true
  };
};
```

---

## 🎨 UI/UX 확장 준비

### **1. 반응형 디자인 확장**
```css
/* 데스크톱 확장 스타일 */
@media (min-width: 768px) {
  .subject-filter {
    display: flex;
    gap: 20px;
  }
  
  .stats-grid {
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
  }
  
  .advanced-statistics {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }
}

/* 태블릿 중간 스타일 */
@media (min-width: 768px) and (max-width: 1024px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
```

### **2. 다크 모드 지원**
```css
/* 다크 모드 스타일 */
@media (prefers-color-scheme: dark) {
  .advanced-statistics {
    background-color: #1a1a1a;
    color: #ffffff;
  }
  
  .stat-card {
    background-color: #2d2d2d;
    border: 1px solid #404040;
  }
  
  .subject-button {
    background-color: #2d2d2d;
    color: #ffffff;
  }
}
```

---

## 🧪 테스트 전략

### **1. 기능 활성화 테스트**
```javascript
describe('서비스 레벨별 기능 활성화', () => {
  test('무료 사용자는 과목 필터링에 접근 불가', () => {
    const mockUser = { subscriptionLevel: 'free' };
    const result = isFeatureAvailable('subjectFiltering', mockUser);
    expect(result).toBe(false);
  });
  
  test('프리미엄 사용자는 과목 필터링에 접근 가능', () => {
    const mockUser = { subscriptionLevel: 'premium' };
    const result = isFeatureAvailable('subjectFiltering', mockUser);
    expect(result).toBe(true);
  });
});
```

### **2. UI 컴포넌트 테스트**
```javascript
describe('과목 필터링 UI', () => {
  test('과목 변경 시 문제 인덱스 리셋', () => {
    const { getByText } = render(<SubjectFilter onSubjectChange={mockFn} />);
    
    fireEvent.click(getByText('관계법령'));
    
    expect(mockFn).toHaveBeenCalledWith('common');
  });
});
```

---

## 📊 성공 지표

### **1. 기능 활성화 지표**
- **업그레이드 전환율**: 무료 → 프리미엄 15% 목표
- **기능 사용률**: 활성화된 기능의 70% 이상 사용
- **사용자 만족도**: 업그레이드 후 만족도 4.5/5.0 목표

### **2. 기술적 지표**
- **로딩 성능**: 기능 활성화 시 성능 저하 없음
- **오류율**: 새로운 기능 오류율 1% 이하
- **호환성**: 기존 기능과의 충돌 없음

---

## 🚀 다음 단계

### **확장 준비 완성 후**
1. **결제 시스템 연동**: 실제 결제 처리 구현
2. **고급 기능 구현**: 진위형 문제, 합격률 예측
3. **성능 최적화**: 대용량 데이터 처리 최적화

---

**작성자**: AI Assistant (Seo Daeri)  
**작성일**: 2024-12-19  
**문서 번호**: 014_GEP_V1.0_1.2_서비스레벨별_확장준비
