// ===================================================================
// AICU S4 Week3 í†µê³„ ê³ ë„í™” ì™„ì „ ê³„íš
// 99ë²ˆ ë¬¸ì„œ ê¸°ë°˜ â†’ ì¡°ëŒ€í‘œë‹˜ ìš”êµ¬ì‚¬í•­ ì™„ë²½ êµ¬í˜„
// ===================================================================

/**
 * ğŸ¯ í˜„ì¬ ìƒí™© (99ë²ˆ ë¬¸ì„œ ê¸°ë°˜)
 * âœ… ë“±ë¡ ì‹œì  ê¸°ë°˜ ëˆ„ì  í†µê³„ ì‹œìŠ¤í…œ ì™„ë£Œ
 * âœ… ì´ì–´í’€ê¸° vs í†µê³„ ë™ê¸°í™” ë¬¸ì œ í•´ê²° (45ê°œ ë¬¸ì œ)
 * âœ… LocalStorage ê¸°ë°˜ ë°ì´í„° ë³´ì¡´ ì™„ë£Œ
 * âœ… ì‹¤ì‹œê°„ í†µê³„ ì—…ë°ì´íŠ¸ ì™„ë£Œ
 * 
 * ğŸš€ Week3 ëª©í‘œ: ì¡°ëŒ€í‘œë‹˜ 101ë²ˆ ìš”êµ¬ì‚¬í•­ ì™„ë²½ êµ¬í˜„
 */

class AICUStatisticsUpgrade {
    constructor() {
        this.version = '3.0.0'; // Week3 ë²„ì „
        this.STORAGE_KEY = 'aicu_statistics_v3';
        this.USER_KEY = 'aicu_user_data';
        this.CLICKS_KEY = 'aicu_click_log_v3';
        this.init();
    }

    /**
     * ğŸ“Š ì¡°ëŒ€í‘œë‹˜ ìš”êµ¬ì‚¬í•­ + ì½”ì½”ì¹˜ ìš°ìˆ˜ ìš”ì†Œ í†µí•© ë°ì´í„° êµ¬ì¡°
     * 99ë²ˆ ê¸°ì¡´ êµ¬ì¡° + 101ë²ˆ ìƒˆ ìš”êµ¬ì‚¬í•­ + 103ë²ˆ ì½”ì½”ì¹˜ ê°œì„ ì‚¬í•­
     */
    getUpgradedDataStructure() {
        return {
            // === ì‹œìŠ¤í…œ ë©”íƒ€ ì •ë³´ (ì½”ì½”ì¹˜ 103ë²ˆ ë°˜ì˜) ===
            meta: {
                version: this.version,
                registeredAt: new Date().toISOString(),  // ì½”ì½”ì¹˜: í†µê³„ ì‹œì‘ì  ëª…í™•í™”
                created_at: new Date().toISOString(),
                last_updated: new Date().toISOString(),
                migration_from: '99_v3.8' // ê¸°ì¡´ ë²„ì „ì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜
            },

            // === ì‚¬ìš©ì ì •ë³´ (99ë²ˆ ê¸°ë°˜) ===
            user: {
                name: 'ê²ŒìŠ¤íŠ¸',
                registration_date: '2025-08-01',
                exam_subject: 'ACIU',
                exam_date: '2025-09-13',
                phone: '010-1234-5678',
                is_guest: true,
                registration_timestamp: new Date().toISOString()
            },

            // === ì´ì–´í’€ê¸° ì •ë³´ (99ë²ˆ + ì¡°ëŒ€í‘œ ì‹œë‚˜ë¦¬ì˜¤ + ì½”ì½”ì¹˜ ê°œì„ ) ===
            progress: {
                // ì½”ì½”ì¹˜: í˜„ì¬ í•™ìŠµ ëª¨ë“œ ì¶”ì 
                currentMode: "basic",        // basic | largeCategory
                
                // ë…¸íŒ€ì¥: ì •í™•í•œ ì´ì–´í’€ê¸° (ì¡°ëŒ€í‘œ ì‹œë‚˜ë¦¬ì˜¤)
                continue_from: {
                    basic_learning: 45,          // í˜„ì¬: 45ë²ˆ ë‹¤ìŒë¶€í„°
                    category_learning: {
                        'ì†í•´ë³´í—˜': 1,
                        'ìƒëª…ë³´í—˜': 1, 
                        'í•´ìƒë³´í—˜': 1,
                        'ë°°ìƒì±…ì„ë³´í—˜': 1
                    }
                },
                
                // ì½”ì½”ì¹˜: í˜¸í™˜ì„±ì„ ìœ„í•œ ê¸°ì¡´ í•„ë“œ ìœ ì§€
                basicLearningIndex: 45,      // ê¸°ì¡´ ì‹œìŠ¤í…œê³¼ í˜¸í™˜
                largeCategoryProgress: {     // ê¸°ì¡´ ì‹œìŠ¤í…œê³¼ í˜¸í™˜
                    "ì¬ì‚°ë³´í—˜": 10,
                    "íŠ¹ì¢…ë³´í—˜": 0,
                    "ë°°ìƒì±…ì„ë³´í—˜": 5,
                    "í•´ìƒë³´í—˜": 0
                }
            },

            // === í•µì‹¬ ëˆ„ì  í†µê³„ (99ë²ˆ + ì¡°ëŒ€í‘œ + ì½”ì½”ì¹˜ í†µí•©) ===
            stats: {
                // ì½”ì½”ì¹˜: ì•± ì „ì²´ ëˆ„ì  í†µê³„
                global: {
                    attempted: 45,           // ì½”ì½”ì¹˜: ì´ í’€ì´ ë¬¸ì œ
                    correct: 36,             // ì¶”ì •ê°’ (80% ì •ë‹µë¥ )
                    incorrect: 9,            // ì½”ì½”ì¹˜: ì˜¤ë‹µ ìˆ˜
                    accuracy: 80,            // ì½”ì½”ì¹˜: ì •ë‹µë¥ /ì˜¤ë‹µë¥ 
                    averageScore: 60         // ì½”ì½”ì¹˜: ì´ í‰ê·  ì ìˆ˜
                },
                
                // ì½”ì½”ì¹˜: ì¼ë³„ í•™ìŠµ í˜„í™©
                daily: {
                    "2025-08-14": {
                        attempted: 20,
                        correct: 15,
                        incorrect: 5,
                        accuracy: 75
                    }
                },
                
                // ì½”ì½”ì¹˜: ëª¨ë“œë³„ í†µê³„
                byMode: {
                    basic: {             // ì¡°ëŒ€í‘œ ìš”êµ¬ì‚¬í•­ 4ë²ˆ + ì½”ì½”ì¹˜ êµ¬ì¡°
                        attempted: 45,
                        correct: 36,
                        incorrect: 9,
                        accuracy: 80
                    },
                    largeCategory: {     // ì¡°ëŒ€í‘œ ìš”êµ¬ì‚¬í•­ 5ë²ˆ + ì½”ì½”ì¹˜ êµ¬ì¡°
                        attempted: 0,
                        correct: 0,
                        incorrect: 0,
                        accuracy: 0
                    }
                },
                
                // ì½”ì½”ì¹˜: ê° ê³¼ëª©ë³„ ìƒì„¸ í†µê³„
                byCategory: {
                    "ì†í•´ë³´í—˜": {
                        attempted: 0,
                        correct: 0,
                        incorrect: 0,
                        accuracy: 0,
                        averageScore: 0,        // ì½”ì½”ì¹˜ + ì¡°ëŒ€í‘œ 3ë²ˆ ìš”êµ¬ì‚¬í•­
                        multipleIncorrectCount: {  // ì½”ì½”ì¹˜ + ì¡°ëŒ€í‘œ 5ë²ˆ ìš”êµ¬ì‚¬í•­
                            "1": 0,  // 1ë²ˆ í‹€ë¦° ë¬¸ì œ ìˆ˜
                            "2": 0,  // 2ë²ˆ í‹€ë¦° ë¬¸ì œ ìˆ˜
                            "3": 0,  // 3ë²ˆ í‹€ë¦° ë¬¸ì œ ìˆ˜
                            "4": 0,  // 4ë²ˆ í‹€ë¦° ë¬¸ì œ ìˆ˜
                            "5": 0   // 5ë²ˆ í‹€ë¦° ë¬¸ì œ ìˆ˜
                        }
                    },
                    "ìƒëª…ë³´í—˜": { /* ë™ì¼ êµ¬ì¡° */ },
                    "í•´ìƒë³´í—˜": { /* ë™ì¼ êµ¬ì¡° */ },
                    "ë°°ìƒì±…ì„ë³´í—˜": { /* ë™ì¼ êµ¬ì¡° */ }
                }
            },

            // === ì¼ë³„ í†µê³„ (99ë²ˆ ê¸°ë°˜ + ì¡°ëŒ€í‘œ ì‹œë‚˜ë¦¬ì˜¤) ===
            daily: {
                "2025-08-14": {
                    // ê¸°ë³¸í•™ìŠµ ì˜¤ëŠ˜ í†µê³„
                    basic_learning: {
                        attempted: 0,            // ì˜¤ëŠ˜ ê¸°ë³¸í•™ìŠµ ì‹œë„ ìˆ˜
                        correct: 0,              // ì˜¤ëŠ˜ ê¸°ë³¸í•™ìŠµ ì •ë‹µ ìˆ˜
                        accuracy: 0              // ì˜¤ëŠ˜ ê¸°ë³¸í•™ìŠµ ì •ë‹µë¥ 
                    },
                    // ëŒ€ë¶„ë¥˜ ì˜¤ëŠ˜ í†µê³„
                    category_learning: {
                        'ì†í•´ë³´í—˜': { attempted: 0, correct: 0, accuracy: 0 },
                        'ìƒëª…ë³´í—˜': { attempted: 0, correct: 0, accuracy: 0 },
                        'í•´ìƒë³´í—˜': { attempted: 0, correct: 0, accuracy: 0 },
                        'ë°°ìƒì±…ì„ë³´í—˜': { attempted: 0, correct: 0, accuracy: 0 }
                    },
                    // ì „ì²´ ì˜¤ëŠ˜ í†µê³„ (ëŒ€ë¬¸ í‘œì‹œìš©)
                    total: {
                        attempted: 0,            // ëª¨ë“  ëª¨ë“œ í•©ê³„
                        correct: 0,              // ëª¨ë“  ëª¨ë“œ ì •ë‹µ í•©ê³„
                        accuracy: 0              // ì˜¤ëŠ˜ ì „ì²´ ì •ë‹µë¥ 
                    }
                }
            },

            // === ìƒì„¸ í•™ìŠµ ë¡œê·¸ (ì¡°ëŒ€í‘œ 4ê°€ì§€ + ì½”ì½”ì¹˜ í™•ì¥) ===
            learningLog: [
                // ì½”ì½”ì¹˜ êµ¬ì¡° + ì¡°ëŒ€í‘œ 4ê°€ì§€ í•µì‹¬ ë°ì´í„°
                // {
                //     questionId: "Q-001",              // 1. ë¬¸ì œID (ì½”ì½”ì¹˜ í˜•ì‹)
                //     timestamp: "2025-08-14T06:45:30.123Z", // 4. í´ë¦­ì‹œê°„ (ì½”ì½”ì¹˜)
                //     userAnswer: "O",                  // 3. ì •ë‹µì—¬ë¶€ ê´€ë ¨ (ì½”ì½”ì¹˜)
                //     isCorrect: true,                  // 3. ì •ë‹µì—¬ë¶€ (ì½”ì½”ì¹˜)
                //     timeSpent: 15,                    // ì½”ì½”ì¹˜: ì´ˆ ë‹¨ìœ„ ì‹œê°„ ì¸¡ì •
                //     category: "ì¬ì‚°ë³´í—˜",              // ì½”ì½”ì¹˜: ì¹´í…Œê³ ë¦¬
                //     incorrectCount: 0,                // ì½”ì½”ì¹˜: í•´ë‹¹ ë¬¸ì œ ì´ ì˜¤ë‹µ íšŸìˆ˜
                //     
                //     // ì¡°ëŒ€í‘œ ì¶”ê°€ ìš”êµ¬ì‚¬í•­
                //     click_date: "2025-08-14",         // 2. í´ë¦­í•œ ë‚ ì§œ (ì¡°ëŒ€í‘œ)
                //     question_type: "ì§„ìœ„í˜•",          // 6ë²ˆ ìš”êµ¬ì‚¬í•­: ì„ íƒí˜•/ì§„ìœ„í˜•
                //     attempt_number: 1,                // ëª‡ ë²ˆì§¸ ì‹œë„
                //     session_id: "session_20250814",  // ì„¸ì…˜ ì¶”ì 
                //     correct_answer: "O"               // ì •ë‹µ ì •ë³´
                // }
            ],

            // === ì˜ˆìƒ ì ìˆ˜ ë° í•©ê²©ë¥  (ì¡°ëŒ€í‘œ ìš”êµ¬ì‚¬í•­ 3ë²ˆ) ===
            predictions: {
                by_subject: {
                    'ì†í•´ë³´í—˜': {
                        predicted_score: 0,      // ì˜ˆìƒ ì ìˆ˜
                        pass_threshold: 40,      // í•©ê²© ê¸°ì¤€
                        pass_probability: 0      // í•©ê²© í™•ë¥ 
                    },
                    'ìƒëª…ë³´í—˜': { /* ë™ì¼ êµ¬ì¡° */ },
                    'í•´ìƒë³´í—˜': { /* ë™ì¼ êµ¬ì¡° */ },
                    'ë°°ìƒì±…ì„ë³´í—˜': { /* ë™ì¼ êµ¬ì¡° */ }
                },
                overall: {
                    average_score: 0,            // ì „ì²´ í‰ê·  ì ìˆ˜
                    pass_threshold: 60,          // ì „ì²´ í•©ê²© ê¸°ì¤€ (ê³¼ëª©ë‹¹ 40ì  + í‰ê·  60ì )
                    pass_probability: 0          // ì „ì²´ í•©ê²© í™•ë¥ 
                }
            }
        };
    }

    /**
     * ğŸ”„ 99ë²ˆ ë°ì´í„°ì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜
     */
    migrateFromV99() {
        console.log('ğŸ”„ 99ë²ˆ ë²„ì „ì—ì„œ Week3ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œì‘');
        
        try {
            // ê¸°ì¡´ ë°ì´í„° ë¡œë“œ
            const oldUser = JSON.parse(localStorage.getItem('aicu_user_data') || '{}');
            const oldStats = JSON.parse(localStorage.getItem('aicu_statistics') || '{}');
            const oldProgress = JSON.parse(localStorage.getItem('aicu_quiz_progress') || '{}');
            const oldLog = JSON.parse(localStorage.getItem('aicu_learning_log') || '[]');

            console.log('ğŸ“Š ê¸°ì¡´ ë°ì´í„° í™•ì¸:', {
                ì´ì–´í’€ê¸°: oldProgress.currentQuestionIndex,
                í†µê³„ì‹œë„: oldStats.total_questions_attempted,
                í†µê³„ì •ë‹µ: oldStats.total_correct_answers,
                ì •ë‹µë¥ : oldStats.accuracy_rate,
                ë¡œê·¸ìˆ˜: oldLog.length
            });

            // ìƒˆ êµ¬ì¡°ë¡œ ë°ì´í„° ë³€í™˜
            const newData = this.getUpgradedDataStructure();

            // ì‚¬ìš©ì ì •ë³´ ë§ˆì´ê·¸ë ˆì´ì…˜
            if (oldUser.name) {
                newData.user = {
                    ...newData.user,
                    ...oldUser,
                    registration_timestamp: oldUser.created_at || oldUser.registration_timestamp
                };
            }

            // ì´ì–´í’€ê¸° ì •ë³´ ë§ˆì´ê·¸ë ˆì´ì…˜ (ì¡°ëŒ€í‘œ ì‹œë‚˜ë¦¬ì˜¤ í•µì‹¬)
            if (oldProgress.currentQuestionIndex) {
                newData.continue_from.basic_learning = oldProgress.currentQuestionIndex;
            }

            // í†µê³„ ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ (99ë²ˆ ë³µì›ëœ ë°ì´í„° í™œìš©)
            if (oldStats.total_questions_attempted) {
                const totalAttempted = Math.max(
                    oldStats.total_questions_attempted || 0,
                    oldProgress.currentQuestionIndex || 0,
                    45 // í˜„ì¬ í™•ì¸ëœ ê°’
                );
                
                newData.cumulative.overall.total_attempted = totalAttempted;
                newData.cumulative.basic_learning.total_attempted = totalAttempted;
                
                if (oldStats.total_correct_answers) {
                    newData.cumulative.overall.total_correct = oldStats.total_correct_answers;
                    newData.cumulative.basic_learning.total_correct = oldStats.total_correct_answers;
                }
                
                if (oldStats.accuracy_rate) {
                    newData.cumulative.overall.accuracy_rate = oldStats.accuracy_rate;
                    newData.cumulative.basic_learning.accuracy_rate = oldStats.accuracy_rate;
                }
            }

            // ì¼ë³„ í†µê³„ ë§ˆì´ê·¸ë ˆì´ì…˜
            if (oldStats.daily_progress) {
                Object.keys(oldStats.daily_progress).forEach(date => {
                    const dayData = oldStats.daily_progress[date];
                    newData.daily[date] = {
                        basic_learning: {
                            attempted: dayData.attempted || 0,
                            correct: dayData.correct || 0,
                            accuracy: dayData.accuracy || 0
                        },
                        category_learning: {
                            'ì†í•´ë³´í—˜': { attempted: 0, correct: 0, accuracy: 0 },
                            'ìƒëª…ë³´í—˜': { attempted: 0, correct: 0, accuracy: 0 },
                            'í•´ìƒë³´í—˜': { attempted: 0, correct: 0, accuracy: 0 },
                            'ë°°ìƒì±…ì„ë³´í—˜': { attempted: 0, correct: 0, accuracy: 0 }
                        },
                        total: {
                            attempted: dayData.attempted || 0,
                            correct: dayData.correct || 0,
                            accuracy: dayData.accuracy || 0
                        }
                    };
                });
            }

            // í´ë¦­ ë¡œê·¸ ë§ˆì´ê·¸ë ˆì´ì…˜ (ì¡°ëŒ€í‘œ 4ê°€ì§€ ë°ì´í„° í˜•ì‹ìœ¼ë¡œ ë³€í™˜)
            if (oldLog && oldLog.length > 0) {
                newData.click_log = oldLog.map((log, index) => ({
                    id: `migrated_${index}_${Date.now()}`,
                    question_id: log.question_id || log.question_code,
                    click_date: log.timestamp ? log.timestamp.split('T')[0] : new Date().toISOString().split('T')[0],
                    click_time: log.timestamp || new Date().toISOString(),
                    is_correct: log.is_correct,
                    user_answer: log.user_answer,
                    correct_answer: log.correct_answer,
                    category: log.category || 'ê¸°ë³¸í•™ìŠµ',
                    question_type: 'ì§„ìœ„í˜•', // ê¸°ë³¸ê°’
                    attempt_number: 1,
                    time_spent: log.time_spent || 15,
                    session_id: log.session_id || 'migrated_session'
                }));
            }

            // ìƒˆ êµ¬ì¡°ë¡œ ì €ì¥
            this.saveData(newData);
            
            console.log('âœ… Week3 ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ:', {
                ìƒˆë²„ì „: newData.meta.version,
                ì´ì–´í’€ê¸°: newData.continue_from.basic_learning,
                í†µê³„ì‹œë„: newData.cumulative.overall.total_attempted,
                í†µê³„ì •ë‹µ: newData.cumulative.overall.total_correct,
                ì •ë‹µë¥ : newData.cumulative.overall.accuracy_rate,
                í´ë¦­ë¡œê·¸: newData.click_log.length
            });

            return newData;

        } catch (error) {
            console.error('âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨:', error);
            return this.getUpgradedDataStructure();
        }
    }

    /**
     * ğŸ¯ ì¡°ëŒ€í‘œë‹˜ í•µì‹¬ í•¨ìˆ˜ + ì½”ì½”ì¹˜ ì¤‘ì•™ì§‘ì¤‘ì‹ ì—…ë°ì´íŠ¸
     * ì½”ì½”ì¹˜: updateAllStatistics() í—ˆë¸Œ í•¨ìˆ˜ ê°œë… ì ìš©
     */
    recordQuestionClick(questionId, isCorrect, category = 'ê¸°ë³¸í•™ìŠµ', userAnswer = null, correctAnswer = null, timeSpent = 15) {
        const data = this.loadData();
        const now = new Date();
        const today = now.toISOString().split('T')[0];
        const timestamp = now.toISOString();

        // ì½”ì½”ì¹˜: ì¤‘ì•™ì§‘ì¤‘ì‹ ì—…ë°ì´íŠ¸ - ëª¨ë“  í†µê³„ë¥¼ í•œ ë²ˆì— ì²˜ë¦¬
        return this.updateAllStatistics(data, questionId, isCorrect, category, userAnswer, correctAnswer, timeSpent, timestamp);
    }

    /**
     * ğŸš€ ì½”ì½”ì¹˜ í•µì‹¬ ì•„ì´ë””ì–´: ì¤‘ì•™ì§‘ì¤‘ì‹ í†µê³„ ì—…ë°ì´íŠ¸
     * ëª¨ë“  í†µê³„ ì—…ë°ì´íŠ¸ì˜ í—ˆë¸Œ ì—­í• 
     */
    updateAllStatistics(data, questionId, isCorrect, category, userAnswer, correctAnswer, timeSpent, timestamp) {
        const today = timestamp.split('T')[0];

        // 1. ì½”ì½”ì¹˜: learningLog ê¸°ë¡ (í†µí•© í˜•ì‹)
        const existingLogs = data.learningLog.filter(log => log.questionId === questionId);
        const attemptNumber = existingLogs.length + 1;
        const incorrectCount = existingLogs.filter(log => !log.isCorrect).length + (isCorrect ? 0 : 1);

        const logEntry = {
            // ì½”ì½”ì¹˜ ê¸°ë³¸ êµ¬ì¡°
            questionId: questionId,
            timestamp: timestamp,
            userAnswer: userAnswer,
            isCorrect: isCorrect,
            timeSpent: timeSpent,
            category: category,
            incorrectCount: incorrectCount,
            
            // ì¡°ëŒ€í‘œ ì¶”ê°€ ìš”êµ¬ì‚¬í•­
            click_date: today,
            question_type: this.detectQuestionType(userAnswer),
            attempt_number: attemptNumber,
            session_id: `session_${today}_${Math.floor(new Date().getHours() / 2)}`,
            correct_answer: correctAnswer
        };

        data.learningLog.push(logEntry);

        // 2. ì½”ì½”ì¹˜: ëª¨ë“  í†µê³„ ì§€í‘œ ë™ì‹œ ì—…ë°ì´íŠ¸
        this.updateGlobalStats(data, isCorrect);                    // ì „ì²´ í†µê³„
        this.updateModeStats(data, category, isCorrect);            // ëª¨ë“œë³„ í†µê³„
        this.updateCategoryStats(data, category, isCorrect);        // ê³¼ëª©ë³„ í†µê³„
        this.updateDailyStats(data, today, category, isCorrect);    // ì¼ë³„ í†µê³„
        
        // 3. ë…¸íŒ€ì¥: ì´ì–´í’€ê¸° ì •í™•ì„± (ì¡°ëŒ€í‘œ ì‹œë‚˜ë¦¬ì˜¤)
        this.updateProgressTracking(data, questionId, category);
        
        // 4. ì½”ì½”ì¹˜: ê³ ê¸‰ ë¶„ì„ í•¨ìˆ˜ë“¤
        this.analyzeIncorrectAnswers(data);                         // ì—¬ëŸ¬ë²ˆ í‹€ë¦° ë¬¸ì œ ë¶„ì„
        this.calculateScoresAndPassRate(data);                     // ì ìˆ˜ ë° í•©ê²©ë¥  ê³„ì‚°
        
        // 5. ì €ì¥ ë° ê²°ê³¼ ë°˜í™˜
        this.saveData(data);

        console.log('ğŸ“Š ì¤‘ì•™ì§‘ì¤‘ì‹ í†µê³„ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', {
            ë¬¸ì œID: questionId,
            ì •ë‹µì—¬ë¶€: isCorrect,
            ì¹´í…Œê³ ë¦¬: category,
            ì‹œë„ë²ˆí˜¸: attemptNumber,
            ì˜¤ë‹µíšŸìˆ˜: incorrectCount,
            ì´ì–´í’€ê¸°: data.progress.continue_from[category === 'ê¸°ë³¸í•™ìŠµ' ? 'basic_learning' : 'category_learning']
        });

        return true;
    }

    /**
     * ğŸ“Š ì½”ì½”ì¹˜: ì „ì²´ í†µê³„ ì—…ë°ì´íŠ¸
     */
    updateGlobalStats(data, isCorrect) {
        data.stats.global.attempted += 1;
        if (isCorrect) {
            data.stats.global.correct += 1;
        } else {
            data.stats.global.incorrect += 1;
        }
        data.stats.global.accuracy = Math.round((data.stats.global.correct / data.stats.global.attempted) * 100);
        data.stats.global.averageScore = data.stats.global.accuracy; // ì •ë‹µë¥ ì„ ì ìˆ˜ë¡œ í™˜ì‚°
    }

    /**
     * ğŸ“Š ì½”ì½”ì¹˜: ëª¨ë“œë³„ í†µê³„ ì—…ë°ì´íŠ¸  
     */
    updateModeStats(data, category, isCorrect) {
        const mode = category === 'ê¸°ë³¸í•™ìŠµ' ? 'basic' : 'largeCategory';
        
        data.stats.byMode[mode].attempted += 1;
        if (isCorrect) {
            data.stats.byMode[mode].correct += 1;
        } else {
            data.stats.byMode[mode].incorrect += 1;
        }
        data.stats.byMode[mode].accuracy = Math.round((data.stats.byMode[mode].correct / data.stats.byMode[mode].attempted) * 100);
    }

    /**
     * ğŸ“Š ì½”ì½”ì¹˜: ê³¼ëª©ë³„ í†µê³„ ì—…ë°ì´íŠ¸
     */
    updateCategoryStats(data, category, isCorrect) {
        if (category !== 'ê¸°ë³¸í•™ìŠµ' && data.stats.byCategory[category]) {
            data.stats.byCategory[category].attempted += 1;
            if (isCorrect) {
                data.stats.byCategory[category].correct += 1;
            } else {
                data.stats.byCategory[category].incorrect += 1;
            }
            data.stats.byCategory[category].accuracy = Math.round(
                (data.stats.byCategory[category].correct / data.stats.byCategory[category].attempted) * 100
            );
            data.stats.byCategory[category].averageScore = data.stats.byCategory[category].accuracy;
        }
    }

    /**
     * ğŸ“Š ì½”ì½”ì¹˜: ì¼ë³„ í†µê³„ ì—…ë°ì´íŠ¸
     */
    updateDailyStats(data, today, category, isCorrect) {
        if (!data.stats.daily[today]) {
            data.stats.daily[today] = {
                attempted: 0,
                correct: 0,
                incorrect: 0,
                accuracy: 0
            };
        }

        data.stats.daily[today].attempted += 1;
        if (isCorrect) {
            data.stats.daily[today].correct += 1;
        } else {
            data.stats.daily[today].incorrect += 1;
        }
        data.stats.daily[today].accuracy = Math.round(
            (data.stats.daily[today].correct / data.stats.daily[today].attempted) * 100
        );
    }

    /**
     * ğŸ¯ ë…¸íŒ€ì¥: ì´ì–´í’€ê¸° ì •í™•ì„± ë³´ì¥ (ì¡°ëŒ€í‘œ ì‹œë‚˜ë¦¬ì˜¤)
     */
    updateProgressTracking(data, questionId, category) {
        const questionNumber = this.extractQuestionNumber(questionId);
        
        // í˜„ì¬ ëª¨ë“œ ì—…ë°ì´íŠ¸ (ì½”ì½”ì¹˜)
        data.progress.currentMode = category === 'ê¸°ë³¸í•™ìŠµ' ? 'basic' : 'largeCategory';
        
        // ì •í™•í•œ ì´ì–´í’€ê¸° ì—…ë°ì´íŠ¸ (ë…¸íŒ€ì¥)
        if (category === 'ê¸°ë³¸í•™ìŠµ') {
            if (questionNumber && questionNumber >= data.progress.continue_from.basic_learning) {
                data.progress.continue_from.basic_learning = questionNumber + 1;
                data.progress.basicLearningIndex = questionNumber; // ì½”ì½”ì¹˜ í˜¸í™˜ì„±
            }
        } else {
            if (data.progress.continue_from.category_learning[category] !== undefined && questionNumber) {
                if (questionNumber >= data.progress.continue_from.category_learning[category]) {
                    data.progress.continue_from.category_learning[category] = questionNumber + 1;
                    // ì½”ì½”ì¹˜ í˜¸í™˜ì„±
                    if (data.progress.largeCategoryProgress[category] !== undefined) {
                        data.progress.largeCategoryProgress[category] = questionNumber;
                    }
                }
            }
        }
    }

    /**
     * ğŸ” ì½”ì½”ì¹˜: ì—¬ëŸ¬ë²ˆ í‹€ë¦° ë¬¸ì œ ë¶„ì„ í•¨ìˆ˜
     */
    analyzeIncorrectAnswers(data) {
        // learningLogë¥¼ ë¶„ì„í•˜ì—¬ ë¬¸ì œ IDë³„ ì˜¤ë‹µ íšŸìˆ˜ ì§‘ê³„
        const questionStats = {};
        
        data.learningLog.forEach(log => {
            if (!questionStats[log.questionId]) {
                questionStats[log.questionId] = { category: log.category, incorrectCount: 0 };
            }
            if (!log.isCorrect) {
                questionStats[log.questionId].incorrectCount += 1;
            }
        });

        // ê³¼ëª©ë³„ ì—¬ëŸ¬ë²ˆ í‹€ë¦° ë¬¸ì œ í†µê³„ ì—…ë°ì´íŠ¸
        Object.keys(data.stats.byCategory).forEach(category => {
            // ê¸°ì¡´ ì¹´ìš´íŠ¸ ì´ˆê¸°í™”
            data.stats.byCategory[category].multipleIncorrectCount = {
                "1": 0, "2": 0, "3": 0, "4": 0, "5": 0
            };
        });

        // ìƒˆë¡œìš´ ì¹´ìš´íŠ¸ ì§‘ê³„
        Object.values(questionStats).forEach(stat => {
            if (stat.category !== 'ê¸°ë³¸í•™ìŠµ' && stat.incorrectCount > 0 && stat.incorrectCount <= 5) {
                if (data.stats.byCategory[stat.category]) {
                    data.stats.byCategory[stat.category].multipleIncorrectCount[stat.incorrectCount.toString()] += 1;
                }
            }
        });
    }

    /**
     * ğŸ“Š ì½”ì½”ì¹˜: ì ìˆ˜ ë° í•©ê²©ë¥  ê³„ì‚° í•¨ìˆ˜
     */
    calculateScoresAndPassRate(data) {
        // ê³¼ëª©ë³„ ì ìˆ˜ ê³„ì‚° (ì •ë‹µë¥  ê¸°ë°˜)
        Object.keys(data.stats.byCategory).forEach(category => {
            const categoryStats = data.stats.byCategory[category];
            if (categoryStats.attempted > 0) {
                // ì •ë‹µë¥ ì„ 100ì  ë§Œì  ì ìˆ˜ë¡œ í™˜ì‚°
                categoryStats.averageScore = categoryStats.accuracy;
            }
        });

        // ì „ì²´ í‰ê·  ì ìˆ˜ ê³„ì‚°
        const categories = Object.keys(data.stats.byCategory);
        const validCategories = categories.filter(cat => data.stats.byCategory[cat].attempted > 0);
        
        if (validCategories.length > 0) {
            const totalScore = validCategories.reduce((sum, cat) => {
                return sum + data.stats.byCategory[cat].averageScore;
            }, 0);
            data.stats.global.averageScore = Math.round(totalScore / validCategories.length);
        }

        // í•©ê²©ë¥  ê³„ì‚° (ê³¼ëª©ë‹¹ 40ì  ì´ìƒ, ì „ì²´ í‰ê·  60ì  ì´ìƒ)
        const subjectPassCount = validCategories.filter(cat => 
            data.stats.byCategory[cat].averageScore >= 40
        ).length;
        const overallPass = data.stats.global.averageScore >= 60;
        
        // ì˜ˆìƒ í•©ê²©ë¥  (ê°„ë‹¨í•œ íœ´ë¦¬ìŠ¤í‹±)
        const passRate = validCategories.length > 0 ? 
            Math.round((subjectPassCount / validCategories.length) * 100) : 0;
        
        data.predictions = {
            ...data.predictions,
            overall: {
                average_score: data.stats.global.averageScore,
                pass_threshold: 60,
                pass_probability: overallPass && passRate >= 80 ? 
                    Math.min(95, data.stats.global.averageScore) : 
                    Math.max(5, passRate)
            }
        };
    }

    /**
     * ğŸ“ˆ í†µí•© í†µê³„ ì—…ë°ì´íŠ¸
     */
    updateAllStatistics(data, questionId, isCorrect, category, today) {
        // ì¼ë³„ í†µê³„ ì´ˆê¸°í™”
        if (!data.daily[today]) {
            data.daily[today] = {
                basic_learning: { attempted: 0, correct: 0, accuracy: 0 },
                category_learning: {
                    'ì†í•´ë³´í—˜': { attempted: 0, correct: 0, accuracy: 0 },
                    'ìƒëª…ë³´í—˜': { attempted: 0, correct: 0, accuracy: 0 },
                    'í•´ìƒë³´í—˜': { attempted: 0, correct: 0, accuracy: 0 },
                    'ë°°ìƒì±…ì„ë³´í—˜': { attempted: 0, correct: 0, accuracy: 0 }
                },
                total: { attempted: 0, correct: 0, accuracy: 0 }
            };
        }

        // ì¹´í…Œê³ ë¦¬ë³„ ì—…ë°ì´íŠ¸
        if (category === 'ê¸°ë³¸í•™ìŠµ') {
            // ê¸°ë³¸í•™ìŠµ í†µê³„ ì—…ë°ì´íŠ¸
            data.cumulative.basic_learning.total_attempted += 1;
            data.daily[today].basic_learning.attempted += 1;
            
            if (isCorrect) {
                data.cumulative.basic_learning.total_correct += 1;
                data.daily[today].basic_learning.correct += 1;
            }

            // ê¸°ë³¸í•™ìŠµ ì •ë‹µë¥  ê³„ì‚°
            data.cumulative.basic_learning.accuracy_rate = Math.round(
                (data.cumulative.basic_learning.total_correct / data.cumulative.basic_learning.total_attempted) * 100
            );
            data.daily[today].basic_learning.accuracy = Math.round(
                (data.daily[today].basic_learning.correct / data.daily[today].basic_learning.attempted) * 100
            );

        } else {
            // ëŒ€ë¶„ë¥˜ í†µê³„ ì—…ë°ì´íŠ¸
            if (data.cumulative.category_learning[category]) {
                data.cumulative.category_learning[category].total_attempted += 1;
                data.daily[today].category_learning[category].attempted += 1;
                
                if (isCorrect) {
                    data.cumulative.category_learning[category].total_correct += 1;
                    data.daily[today].category_learning[category].correct += 1;
                }

                // ëŒ€ë¶„ë¥˜ ì •ë‹µë¥  ê³„ì‚°
                const categoryStats = data.cumulative.category_learning[category];
                categoryStats.accuracy_rate = Math.round(
                    (categoryStats.total_correct / categoryStats.total_attempted) * 100
                );
                data.daily[today].category_learning[category].accuracy = Math.round(
                    (data.daily[today].category_learning[category].correct / data.daily[today].category_learning[category].attempted) * 100
                );
            }
        }

        // ì „ì²´ í†µê³„ ì—…ë°ì´íŠ¸
        data.cumulative.overall.total_attempted += 1;
        data.daily[today].total.attempted += 1;
        
        if (isCorrect) {
            data.cumulative.overall.total_correct += 1;
            data.daily[today].total.correct += 1;
        }

        // ì „ì²´ ì •ë‹µë¥  ê³„ì‚°
        data.cumulative.overall.accuracy_rate = Math.round(
            (data.cumulative.overall.total_correct / data.cumulative.overall.total_attempted) * 100
        );
        data.daily[today].total.accuracy = Math.round(
            (data.daily[today].total.correct / data.daily[today].total.attempted) * 100
        );

        // í•™ìŠµì¼ ìˆ˜ ê³„ì‚°
        data.cumulative.overall.study_days = Object.keys(data.daily).length;
    }

    /**
     * ğŸ¯ ì´ì–´í’€ê¸° ì—…ë°ì´íŠ¸ (ì¡°ëŒ€í‘œ ì‹œë‚˜ë¦¬ì˜¤ í•µì‹¬)
     */
    updateContinueFrom(data, questionId, category) {
        const questionNumber = this.extractQuestionNumber(questionId);
        
        if (category === 'ê¸°ë³¸í•™ìŠµ') {
            if (questionNumber && questionNumber >= data.continue_from.basic_learning) {
                data.continue_from.basic_learning = questionNumber + 1;
            }
        } else {
            if (data.continue_from.category_learning[category] !== undefined && questionNumber) {
                if (questionNumber >= data.continue_from.category_learning[category]) {
                    data.continue_from.category_learning[category] = questionNumber + 1;
                }
            }
        }
    }

    /**
     * ğŸ” ì—¬ëŸ¬ë²ˆ í‹€ë¦° ë¬¸ì œ ë¶„ì„ (ì¡°ëŒ€í‘œ ìš”êµ¬ì‚¬í•­ 5ë²ˆ)
     */
    analyzeMultipleIncorrect(data, questionId, isCorrect, category) {
        if (!isCorrect && category !== 'ê¸°ë³¸í•™ìŠµ') {
            // ì´ ë¬¸ì œë¥¼ ëª‡ ë²ˆ í‹€ë ¸ëŠ”ì§€ ê³„ì‚°
            const incorrectCount = data.click_log.filter(
                click => click.question_id === questionId && !click.is_correct
            ).length;

            if (incorrectCount <= 5 && data.cumulative.category_learning[category]) {
                // ì´ì „ í‹€ë¦° íšŸìˆ˜ëŠ” ì°¨ê°í•˜ê³  ìƒˆë¡œìš´ íšŸìˆ˜ë¡œ ì—…ë°ì´íŠ¸
                if (incorrectCount > 1) {
                    data.cumulative.category_learning[category].multiple_incorrect[incorrectCount - 1] -= 1;
                }
                data.cumulative.category_learning[category].multiple_incorrect[incorrectCount] += 1;
            }
        }
    }

    /**
     * ğŸ“Š ì˜ˆìƒ ì ìˆ˜ ê³„ì‚° (ì¡°ëŒ€í‘œ ìš”êµ¬ì‚¬í•­ 3ë²ˆ)
     */
    calculatePredictedScores(data) {
        // ê³¼ëª©ë³„ ì˜ˆìƒ ì ìˆ˜ ê³„ì‚°
        Object.keys(data.cumulative.category_learning).forEach(subject => {
            const subjectStats = data.cumulative.category_learning[subject];
            if (subjectStats.total_attempted > 0) {
                // ì •ë‹µë¥ ì„ ì ìˆ˜ë¡œ í™˜ì‚° (100ì  ë§Œì )
                subjectStats.average_score = Math.round(subjectStats.accuracy_rate);
                
                // í•©ê²© í™•ë¥  ê³„ì‚° (40ì  ì´ìƒì´ë©´ í•©ê²©)
                data.predictions.by_subject[subject] = {
                    predicted_score: subjectStats.average_score,
                    pass_threshold: 40,
                    pass_probability: subjectStats.average_score >= 40 ? 
                        Math.min(95, 50 + subjectStats.average_score) : 
                        Math.max(5, subjectStats.average_score)
                };
            }
        });

        // ì „ì²´ í‰ê·  ì ìˆ˜ ê³„ì‚°
        const subjects = Object.keys(data.predictions.by_subject);
        const totalScore = subjects.reduce((sum, subject) => {
            return sum + (data.predictions.by_subject[subject].predicted_score || 0);
        }, 0);
        
        data.predictions.overall.average_score = subjects.length > 0 ? 
            Math.round(totalScore / subjects.length) : 0;

        // ì „ì²´ í•©ê²© í™•ë¥  (ê³¼ëª©ë‹¹ 40ì  ì´ìƒ + í‰ê·  60ì  ì´ìƒ)
        const allSubjectsPass = subjects.every(subject => 
            data.predictions.by_subject[subject].predicted_score >= 40
        );
        const averagePass = data.predictions.overall.average_score >= 60;
        
        data.predictions.overall.pass_probability = allSubjectsPass && averagePass ? 
            Math.min(95, data.predictions.overall.average_score) : 
            Math.max(5, data.predictions.overall.average_score / 2);
    }

    /**
     * ğŸ“Š í™”ë©´ë³„ í†µê³„ ë°ì´í„° ì œê³µ
     */

    // ëŒ€ë¬¸ í†µê³„ (ì¡°ëŒ€í‘œ ì‹œë‚˜ë¦¬ì˜¤: ì „ì²´ í†µí•©)
    getHomePageStats() {
        const data = this.loadData();
        const today = new Date().toISOString().split('T')[0];
        
        const todayStats = data.daily[today] || { total: { attempted: 0, correct: 0, accuracy: 0 } };
        const overall = data.cumulative.overall;

        return {
            // ì‚¬ìš©ì ì •ë³´
            user_name: data.user.name,
            registration_date: data.user.registration_date,
            exam_date: data.user.exam_date,
            d_day: this.calculateDDay(data.user.exam_date),
            
            // í•™ìŠµ ì§„ë„ (ì¡°ëŒ€í‘œ ìš”êµ¬: "ì´ ëª‡ ë¬¸ì œë¥¼ í’€ì—ˆë‹¤")
            progress_rate: this.calculateProgressRate(overall.total_attempted, 789),
            total_attempted: overall.total_attempted,      // 1ë²ˆ ìš”êµ¬ì‚¬í•­
            total_correct: overall.total_correct,
            overall_accuracy: overall.accuracy_rate,       // 2ë²ˆ ìš”êµ¬ì‚¬í•­
            
            // ì˜¤ëŠ˜ í•™ìŠµ (ì¡°ëŒ€í‘œ ìš”êµ¬: "ì˜¤ëŠ˜ ëª‡ ë¬¸ì œë¥¼ í’€ì—ˆê³ ")
            today_attempted: todayStats.total.attempted,   // 4ë²ˆ, 5ë²ˆ ìš”êµ¬ì‚¬í•­
            today_correct: todayStats.total.correct,
            today_accuracy: todayStats.total.accuracy,
            
            // í•™ìŠµì¼ ë° ì˜ˆìƒ ì ìˆ˜
            study_days: overall.study_days,
            predicted_average: data.predictions.overall.average_score,  // 3ë²ˆ ìš”êµ¬ì‚¬í•­
            pass_probability: data.predictions.overall.pass_probability
        };
    }

    // ê¸°ë³¸í•™ìŠµ í†µê³„ (ì¡°ëŒ€í‘œ ìš”êµ¬ì‚¬í•­ 4ë²ˆ)
    getBasicLearningStats() {
        const data = this.loadData();
        const today = new Date().toISOString().split('T')[0];
        
        const todayStats = data.daily[today]?.basic_learning || { attempted: 0, correct: 0, accuracy: 0 };
        const cumulativeStats = data.cumulative.basic_learning;

        return {
            // ì´ì–´í’€ê¸° ì •ë³´
            continue_from: data.continue_from.basic_learning,
            
            // ì˜¤ëŠ˜ ê¸°ë³¸í•™ìŠµ (ì¡°ëŒ€í‘œ ìš”êµ¬: "ê¸°ë³¸í•™ìŠµì—ì„œ ì˜¤ëŠ˜ ëª‡ ë¬¸ì œë¥¼ í’€ì—ˆê³ ")
            today_attempted: todayStats.attempted,
            today_correct: todayStats.correct,
            today_accuracy: todayStats.accuracy,
            
            // ëˆ„ì  ê¸°ë³¸í•™ìŠµ (ì¡°ëŒ€í‘œ ìš”êµ¬: "ê¸°ë³¸í•™ìŠµì—ì„œ ì˜¤ëŠ˜ê¹Œì§€ ì´ ëª‡ë¬¸ì œë¥¼ í’€ì—ˆê³ ")
            total_attempted: cumulativeStats.total_attempted,
            total_correct: cumulativeStats.total_correct,
            total_accuracy: cumulativeStats.accuracy_rate,
            
            // ì§„í–‰ë¥ 
            progress_rate: this.calculateProgressRate(cumulativeStats.total_attempted, 789)
        };
    }

    // ëŒ€ë¶„ë¥˜í•™ìŠµ í†µê³„ (ì¡°ëŒ€í‘œ ìš”êµ¬ì‚¬í•­ 5ë²ˆ)
    getCategoryLearningStats(category = null) {
        const data = this.loadData();
        const today = new Date().toISOString().split('T')[0];
        
        if (category && category !== 'ì „ì²´') {
            // íŠ¹ì • ê³¼ëª© í†µê³„
            const todayStats = data.daily[today]?.category_learning[category] || { attempted: 0, correct: 0, accuracy: 0 };
            const cumulativeStats = data.cumulative.category_learning[category];

            return {
                category: category,
                continue_from: data.continue_from.category_learning[category],
                
                // ì˜¤ëŠ˜ í•´ë‹¹ ê³¼ëª© (ì¡°ëŒ€í‘œ ìš”êµ¬: "ê° ëŒ€ë¶„ë¥˜ ê³¼ëª©ë³„ë¡œ ì˜¤ëŠ˜ ëª‡ ë¬¸ì œë¥¼")
                today_attempted: todayStats.attempted,
                today_correct: todayStats.correct, 
                today_accuracy: todayStats.accuracy,
                
                // ëˆ„ì  í•´ë‹¹ ê³¼ëª© (ì¡°ëŒ€í‘œ ìš”êµ¬: "í•´ë‹¹ê³¼ëª©ì— ëŒ€í•´ì„œ ì˜¤ëŠ˜ê¹Œì§€ ì´ ëª‡ë¬¸ì œë¥¼")
                total_attempted: cumulativeStats.total_attempted,
                total_correct: cumulativeStats.total_correct,
                total_accuracy: cumulativeStats.accuracy_rate,
                
                // ì˜ˆìƒ ì ìˆ˜ ë° ì—¬ëŸ¬ë²ˆ í‹€ë¦° ë¬¸ì œ
                predicted_score: cumulativeStats.average_score,    // 3ë²ˆ ìš”êµ¬ì‚¬í•­
                multiple_incorrect: cumulativeStats.multiple_incorrect  // 5ë²ˆ ìš”êµ¬ì‚¬í•­
            };
        } else {
            // ëŒ€ë¶„ë¥˜ ì „ì²´ í†µê³„ (ì¡°ëŒ€í‘œ ìš”êµ¬: "ëŒ€ë¶„ë¥˜

            ì¡°ëŒ€í‘œë‹˜, ì½”ì½”ì¹˜ì•ˆì˜ ìš°ìˆ˜í•œ ìš”ì†Œë“¤ì„ ë…¸íŒ€ì¥ì•ˆì— í†µí•©í•˜ì—¬ ë”ìš± ì™„ë²½í•œ Week3 ê³„íšìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê² ìŠµë‹ˆë‹¤.## ğŸ¯ **ì½”ì½”ì¹˜ ìš°ìˆ˜ ìš”ì†Œ ì™„ë²½ í†µí•© ì™„ë£Œ**

### **âœ… ì½”ì½”ì¹˜ì•ˆì—ì„œ ì±„íƒí•œ í•µì‹¬ ì•„ì´ë””ì–´**

#### **1. ì¤‘ì•™ì§‘ì¤‘ì‹ ì—…ë°ì´íŠ¸ ì‹œìŠ¤í…œ**
```javascript
// ì½”ì½”ì¹˜ í•µì‹¬: updateAllStatistics() í—ˆë¸Œ í•¨ìˆ˜
// â†’ ëª¨ë“  í†µê³„ê°€ í•œ ë²ˆì— ì—…ë°ì´íŠ¸ë˜ì–´ ë°ì´í„° ë¶ˆì¼ì¹˜ ì›ì²œ ì°¨ë‹¨
```

#### **2. í†µí•©ëœ ë°ì´í„° êµ¬ì¡°**
```javascript
// ì½”ì½”ì¹˜: stats.global, stats.byMode, stats.byCategory
// + ë…¸íŒ€ì¥: continue_from ì •í™•ì„±
// = ì™„ë²½í•œ í†µí•© êµ¬ì¡°
```

#### **3. ì‹œê°„ ì¸¡ì • ë° ì„¸ì…˜ ê´€ë¦¬**
```javascript
// ì½”ì½”ì¹˜: timeSpent, incorrectCount, session ì¶”ì 
// â†’ í•™ìŠµ íš¨ìœ¨ì„± ë¶„ì„ ê¸°ë°˜ ë§ˆë ¨
```

#### **4. ê³ ê¸‰ ë¶„ì„ í•¨ìˆ˜ë“¤**
```javascript
// ì½”ì½”ì¹˜: analyzeIncorrectAnswers(), calculateScoresAndPassRate()
// â†’ ì—¬ëŸ¬ë²ˆ í‹€ë¦° ë¬¸ì œ ë¶„ì„, í•©ê²©ë¥  ì˜ˆì¸¡
```

### **ğŸš€ í†µí•©ëœ ì‹œìŠ¤í…œì˜ ìš°ìˆ˜ì„±**

#### **ë°ì´í„° ë¬´ê²°ì„±**
- **ì½”ì½”ì¹˜**: ì¤‘ì•™ì§‘ì¤‘ì‹ ì—…ë°ì´íŠ¸ë¡œ ë¶ˆì¼ì¹˜ ë°©ì§€ âœ…
- **ë…¸íŒ€ì¥**: ì´ì–´í’€ê¸° ì •í™•ì„± ë³´ì¥ âœ…
- **ì¡°ëŒ€í‘œ**: 4ê°€ì§€ í•µì‹¬ ë°ì´í„° ì™„ë²½ ìˆ˜ì§‘ âœ…

#### **í™•ì¥ì„±**
- **ì½”ì½”ì¹˜**: ë ˆê³ ëª¨ë¸ ë°©ì‹ì˜ ì ì§„ì  ê¸°ëŠ¥ ì¶”ê°€ âœ…
- **ë…¸íŒ€ì¥**: ëª¨ë“ˆí™”ëœ êµ¬ì¡°ë¡œ ìœ ì§€ë³´ìˆ˜ ìš©ì´ âœ…
- **í˜¸í™˜ì„±**: ê¸°ì¡´ ì‹œìŠ¤í…œê³¼ ì™„ë²½ í˜¸í™˜ âœ…

#### **ë¶„ì„ ëŠ¥ë ¥**
- **ê¸°ë³¸ í†µê³„**: ì¼ë³„, ëˆ„ì , ëª¨ë“œë³„ ì™„ë²½ ì§€ì› âœ…
- **ê³ ê¸‰ ë¶„ì„**: ì—¬ëŸ¬ë²ˆ í‹€ë¦° ë¬¸ì œ, í•™ìŠµ íŒ¨í„´ âœ…
- **ì˜ˆì¸¡ ê¸°ëŠ¥**: ì˜ˆìƒ ì ìˆ˜, í•©ê²©ë¥  ê³„ì‚° âœ…

**ì¡°ëŒ€í‘œë‹˜, ì´ì œ ì½”ì½”ì¹˜ì˜ ìš°ìˆ˜í•œ ì•„ì´ë””ì–´ë“¤ì´ ëª¨ë‘ í†µí•©ëœ ì™„ë²½í•œ Week3 í†µê³„ ì‹œìŠ¤í…œì´ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!** 

ë…¸íŒ€ì¥ì˜ ì •í™•ì„± + ì½”ì½”ì¹˜ì˜ ì²´ê³„ì„± + ì¡°ëŒ€í‘œë‹˜ì˜ ì‹¤ìš©ì„±ì´ ëª¨ë‘ ê²°í•©ëœ ìµœì ì˜ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. ğŸ—ï¸âœ¨