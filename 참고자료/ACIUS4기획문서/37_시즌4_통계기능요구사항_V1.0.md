# 시즌4_통계기능요구사항_V1.0

**작성일**: 2025년 8월 9일 22:40 KST  
**작성자**: 노팀장 (기술자문)  
**승인자**: 조대표님  
**기준 문서**: 시즌1 개발경과 + 조대표님 요구사항 종합  
**프로젝트**: AICU 시즌4 Week2 통계기능 개발

---
**조대표의 초기 요구사항 **
통계기능에 대한 조대표의 개념

우리는 시즌1에서 통계관련 많은 협의를 했습니다. 첨부 문서를 면밀하게 분석하여 통계기능 요구사항을 업데이트 해 주세요

핵심은 우리 앱의 경쟁력은 첫째 기출문제와 정답을 정확하게 제공하느냐와 둘째 각 사용자별 학습이력에 대한 데이터에 기초해서 최신 학습이론을 적용한 과학적이고 효과적인 학습 현황과 방법론을 제공하는가에 있습니다. 
첫번째 경쟁력은 경쟁사와 동일합니다. 왜냐면 출제기관에서 발표한 문제지와 정답지는 누구에게나 동일하기 때문입니다. 
두번째가 이 앱의 경졍력 입니다. 단순한 정답 오답을 나열하는 것이 아닌 각개인의 현재의 상황을 파악하고 취약점을 파악하고 효과적인 공부를 위한 문제 제시 이론이 뒷받침 되어 이 앱을 이용하여 학습을 하면 합격률이 올라 간다는 것을 증명해야 합니다. 그것을 위해서는 이 앱에서 수집되는 데이터를 기반으로 다양한 서비스를 구현해야 하는 것입니다. 이 앱의 부가가치는 수집된 데이터를 기반으로 어떤 통계 기법을 적용하는 가 입니다... 첨부한 문서들과 나의 의도를 종합하여 우리의 통계 기능 요구사항을 체계적으로 재 정의 해 주기 바랍니다

통계수치의 핵핵심은 다음과 같습니다
통계수치의 데이터를 기록하는 시점은 설정에서 사용자를 등록한 시간부터 개시합니다
사용자가 본인의 피씨, 휴대폰, 태블릿등 어떤 디바이스에서 접근하더라도 수치가 계속 업데이트 되어야 합니다
설정의초기화를 누르면 모든 데이터가 최기화 됩니다
다루어야 할 수치는 다음과 같습니다


## 📊 **노팀장 분석 의견**

### **현재 상황 진단**
- ✅ **시즌1 성과**: 고도화된 통계시스템 완성 (StatisticsCache, 통합스키마 등)
- ⚠️ **Week1 현실**: 기본적인 정답/오답 카운트 수준
- 🎯 **격차 해소**: 시즌1 수준 이상의 통계기능 구현 필요

### **기술적 검토 결과**
```
시즌1 대비 현재 Week1 완성도:
- 통계 인프라: 30% 수준
- 데이터 구조: 20% 수준  
- UI 통계 표시: 40% 수준
- 실시간 업데이트: 50% 수준

→ 결론: 전면 재개발 필요
```

### **개발 우선순위 제안**
1. **핵심 인프라**: StatisticsCache 클래스 + 통합스키마
2. **데이터 수집**: 실시간 문제풀이 데이터 추적
3. **화면 표시**: 각 화면별 통계 정확한 표시
4. **사용자 시스템**: 다중사용자 대응

---

## 🎯 **조대표님 요구사항 (정리)**

### **[대문] 홈 화면 통계**

#### **1. 보유문제수 현황**
- **데이터 소스**: `ins_master_db.csv`의 소스필드
- **필터링**: "인스교제외" + "보험중개사 시험" 
- **표시**: 전체 문제 수 카운트
- **기술 구현**: CSV 파싱 시 필터링 로직

#### **2. 학습진도 현황**
- **기준점**: 사용자 등록 시점부터 데이터 수집
- **2-1 완료문제**: 실제 풀이한 모든 문제 수 합산
- **2-2 전체진도율**: 완료문제 ÷ 보유문제수 × 100
- **2-3 정답율**: 풀이한 문제 중 정답 비율 (오늘의진도율→정답율 변경)

#### **3. 금일 학습현황 (별도 박스)**
- **3-1 오늘 총 문제수**: 당일 풀이한 문제 수
- **3-2 오늘 정답수**: 당일 정답 문제 수  
- **3-3 오늘 정답율**: 당일 정답 ÷ 당일 총 문제수 × 100

#### **업데이트 방식**
- **자동 갱신**: 개별 문제풀이 시 실시간 업데이트
- **수동 갱신**: "통계 데이터 불러오기" 버튼 클릭

### **[기본학습] 모든 모드 공통**

#### **4. 기본학습 통계 (이어풀기/처음풀기/랜덤풀기 공통)**
- **4-1 누적현황**: 총 문제수, 총 정답수, 총 정답율
- **4-2 금일현황**: 금일 문제수, 금일 정답수, 금일 정답율
- **표시 형태**: 2줄 구조로 명확 구분

### **[대분류학습] 카테고리별 상세 통계**

#### **5-1 전체 누적통계 (상단 제목 우측)**
- **위치**: "대분류학습" 제목 우측
- **내용**: 전체 문제수, 전체 정답수, 전체 정답율

#### **5-2 카테고리별 개별 통계**
각 카테고리(재산보험, 특종보험, 배상책임보험, 해상보험) 클릭 시:
- **누적현황**: 해당 카테고리 총 문제수, 총 정답수, 총 정답율
- **금일현황**: 해당 카테고리 금일 문제수, 금일 정답수, 금일 정답율

---

## 🔧 **기술 구현 계획**

### **데이터 구조 설계**
```javascript
const AICU_STATS_SCHEMA = {
    meta: {
        version: "4.0",
        registeredAt: "2025-08-09T22:40:00+09:00",
        userName: "사용자명",
        lastUpdated: "2025-08-09T22:40:00+09:00"
    },
    
    // 전체 보유문제수
    totalQuestions: {
        count: 1379,  // ins_master_db.csv 필터링 결과
        lastChecked: "2025-08-09T22:40:00+09:00"
    },
    
    // 전역 통계 (모든 모드 합산)
    global: {
        cumulative: { attempted: 0, correct: 0, accuracy: 0 },
        daily: {
            "2025-08-09": { attempted: 0, correct: 0, accuracy: 0 }
        }
    },
    
    // 모드별 통계
    modes: {
        basic: {
            cumulative: { attempted: 0, correct: 0, accuracy: 0 },
            daily: {
                "2025-08-09": { attempted: 0, correct: 0, accuracy: 0 }
            }
        },
        largeCategory: {
            cumulative: { attempted: 0, correct: 0, accuracy: 0 },
            daily: {
                "2025-08-09": { attempted: 0, correct: 0, accuracy: 0 }
            },
            categories: {
                "재산보험": {
                    cumulative: { attempted: 0, correct: 0, accuracy: 0 },
                    daily: {
                        "2025-08-09": { attempted: 0, correct: 0, accuracy: 0 }
                    }
                },
                "특종보험": { /* 동일 구조 */ },
                "배상책임보험": { /* 동일 구조 */ },
                "해상보험": { /* 동일 구조 */ }
            }
        }
    }
};
```

### **핵심 클래스 설계**
```javascript
class AICU_StatisticsManager {
    constructor() {
        this.cache = null;
        this.isDirty = false;
    }
    
    // 보유문제수 계산
    calculateTotalQuestions(csvData) {
        // ins_master_db.csv 필터링 로직
    }
    
    // 실시간 통계 업데이트
    updateStatistics(mode, category, isCorrect) {
        // 전역, 모드별, 카테고리별 통계 동시 업데이트
    }
    
    // 화면별 통계 표시
    displayHomeStatistics() { /* 대문 통계 */ }
    displayBasicStatistics() { /* 기본학습 통계 */ }
    displayCategoryStatistics(category) { /* 대분류 통계 */ }
    
    // 데이터 영속성
    saveToStorage() { /* LocalStorage 저장 */ }
    loadFromStorage() { /* LocalStorage 로드 */ }
}
```

---

## 📅 **개발 일정 (Week2 수정안)**

### **Day 8 (오늘): 요구사항 확정 및 설계**
- ✅ 조대표님 요구사항 수집 완료
- ⏳ 데이터 구조 및 클래스 설계
- ⏳ 시즌1 코드 분석 및 재사용 가능 부분 식별

### **Day 9-10: 핵심 통계 엔진 개발**
- **StatisticsManager 클래스** (200줄)
- **데이터 수집 및 저장 로직** (100줄)
- **보유문제수 계산 로직** (50줄)

### **Day 11: 화면별 통계 표시 기능**
- **대문 통계 표시** (100줄)
- **기본학습 통계 표시** (100줄)
- **대분류학습 통계 표시** (150줄)

### **Day 12: 사용자 시스템 연동**
- **다중사용자 대응** (100줄)
- **사용자별 통계 분리** (50줄)

### **Day 13: 테스트 및 검증**
- **조대표님 검수**
- **모든 화면 통계 동작 확인**
- **데이터 정확성 검증**

---

## 🎯 **완성 기준**

### **필수 완료 조건**
```
✅ 대문 통계 3개 박스 정확 표시
✅ 기본학습 누적/금일 현황 정확 표시  
✅ 대분류학습 전체/카테고리별 통계 정확 표시
✅ 실시간 업데이트 정상 동작
✅ 사용자 등록 시점부터 데이터 수집
✅ 다중 디바이스 동기화 (LocalStorage 기반)
✅ 초기화 기능 정상 동작
```

### **품질 기준**
- **정확성**: 시즌1 수준 이상의 정확한 통계
- **실시간성**: 문제풀이 즉시 통계 반영  
- **안정성**: 브라우저 새로고침 후에도 데이터 보존
- **사용성**: 조대표님이 직접 사용 가능한 완성도

---

## 🚨 **중요 제약사항**

### **데이터 소스 제약**
- ❌ CSV 파일 수정 금지
- ❌ 기존 문제풀이 로직 변경 금지
- ✅ 기존 데이터 구조 최대 활용

### **개발 원칙**
- **시즌1 코드 재사용**: 검증된 로직 최대 활용
- **점진적 개발**: 화면별 단계적 완성
- **즉시 테스트**: 각 단계별 즉시 검증

---

## 🎉 **성공 지표**

### **조대표님 만족도 기준**
- ✅ 시즌1 대비 통계 기능 향상
- ✅ 모든 요구사항 100% 반영
- ✅ 이상업님 사용 시 문제없음
- ✅ 다중사용자 기반 구축 완료

### **기술적 성공 기준**
- ✅ 코드 품질: A등급 (200-300줄 모듈)
- ✅ 성능: 통계 업데이트 < 100ms
- ✅ 안정성: 데이터 손실 0%
- ✅ 확장성: 향후 기능 추가 용이

---

## 📋 **즉시 실행 계획**

### **금일(Day 8) 잔여 작업**
1. **조대표님 최종 승인** (지금 진행)
2. **시즌1 코드 분석** (1시간)
3. **데이터 구조 설계 완료** (1시간)
4. **내일 개발 준비 완료**

### **내일(Day 9) 착수 계획**
- **오전**: StatisticsManager 클래스 개발
- **오후**: 데이터 수집 로직 개발
- **저녁**: 기본 테스트 및 검증

---

## 🤝 **조대표님께 확인 요청**

### **최종 확인 사항**
1. **요구사항 누락 없는지 확인**
2. **우선순위 조정 필요한지 확인**  
3. **추가 요구사항 있는지 확인**
4. **개발 일정 승인**

**조대표님 승인 완료 시 내일부터 즉시 개발 착수합니다.**

---

**문서 승인:**
- **작성자**: 노팀장 ✅ (2025.08.09 22:40 KST)
- **기술 검토**: 시즌1 코드 분석 완료
- **최종 승인**: 조대표님 ⏳

*조대표님의 통계기능 요구사항을 100% 반영한 완벽한 시스템을 구축하겠습니다.*