# 104_대분류_문제불러오기와_통계기능_디버깅_계획서.md

## 📋 **프로젝트 개요**

### **목적**
- 대분류 학습 페이지의 4대 메뉴 복원
- 기본학습과 동일한 방식의 문제 불러오기 시스템 구현
- 카테고리별 통계 기능 구현 및 디버깅

### **현재 문제점**
1. **메뉴 구조 문제**: 6개 메뉴 (재산보험, 특종보험, 배상책임보험, 해상보험, 보험경영, 전체) → 4개 메뉴로 복원 필요
2. **문제 불러오기 미구현**: 카테고리별 문제 필터링 및 로딩 기능 없음
3. **통계 시스템 미구현**: 카테고리별 진행상황 및 정답률 추적 기능 없음
4. **이어풀기 기능 미구현**: 카테고리별 진행상황 저장 및 복원 기능 없음

## 🎯 **요구사항 분석**

### **기본학습과의 차이점**
- **공통점**: 문제 풀이 방식, 통계 추적, 이어풀기 기능
- **차이점**: 4개 카테고리로 세분화된 과목 구조

### **필요한 4대 메뉴**
1. **재산보험** (06재산보험) - 169문제
2. **특종보험** (07특종보험) - 182문제
3. **배상책임보험** (08배상책임보험) - 268문제
4. **해상보험** (09해상보험) - 170문제

## 🏗️ **아키텍처 설계**

### **LocalStorage 구조 확장**
```javascript
// 기존 구조에 카테고리별 데이터 추가
aicu_statistics: {
    // 기존 통계 데이터
    total_questions_attempted: 0,
    total_correct_answers: 0,
    accuracy_rate: 0,
    daily_progress: {},
    
    // 카테고리별 통계 데이터 (신규) - 98번 문서 기반
    categories: {
        "06재산보험": {
            total_questions: 169,
            solved: 0,
            correct: 0,
            accuracy: 0,
            current_question_index: 0,
            daily_progress: {}
        },
        "07특종보험": {
            total_questions: 182,
            solved: 0,
            correct: 0,
            accuracy: 0,
            current_question_index: 0,
            daily_progress: {}
        },
        "08배상책임보험": {
            total_questions: 268,
            solved: 0,
            correct: 0,
            accuracy: 0,
            current_question_index: 0,
            daily_progress: {}
        },
        "09해상보험": {
            total_questions: 170,
            solved: 0,
            correct: 0,
            accuracy: 0,
            current_question_index: 0,
            daily_progress: {}
        }
    }
}

// 카테고리별 진행상황 저장
aicu_category_progress: {
    "06재산보험": {
        currentQuestionIndex: 0,
        lastUpdated: "2025-08-14T..."
    },
    "07특종보험": {
        currentQuestionIndex: 0,
        lastUpdated: "2025-08-14T..."
    },
    "08배상책임보험": {
        currentQuestionIndex: 0,
        lastUpdated: "2025-08-14T..."
    },
    "09해상보험": {
        currentQuestionIndex: 0,
        lastUpdated: "2025-08-14T..."
    }
}

// 현재 선택된 카테고리 정보
aicu_current_category: "06재산보험"
```

## 🔧 **개발 단계**

### **Phase 1: 대분류 학습 페이지 수정**
1. **메뉴 구조 수정**
   - 6개 메뉴 → 4개 메뉴로 변경
   - "보험경영", "전체 학습" 메뉴 제거
   - 각 카테고리별 문제 수 표시

2. **카테고리별 통계 표시 개선**
   - 실시간 진행상황 업데이트
   - 정답률 계산 및 표시
   - 일별 학습 현황 표시

### **Phase 2: 문제 불러오기 시스템 구현**
1. **카테고리별 문제 필터링**
   - API 호출 시 카테고리 파라미터 추가
   - 문제 데이터에서 카테고리별 필터링
   - 각 카테고리별 총 문제 수 계산

2. **기본학습 페이지 통합**
   - 카테고리 정보를 기본학습 페이지로 전달
   - 카테고리별 진행상황 표시
   - 카테고리별 이어풀기 기능

### **Phase 3: 통계 시스템 구현**
1. **카테고리별 통계 추적**
   - 각 카테고리별 풀이 문제 수 추적
   - 카테고리별 정답률 계산
   - 일별 카테고리별 학습 현황

2. **통계 동기화**
   - 이어풀기 데이터와 통계 데이터 동기화
   - 카테고리별 진행상황 복원
   - 데이터 일관성 보장

### **Phase 4: 이어풀기 기능 구현**
1. **카테고리별 진행상황 저장**
   - 각 카테고리별 현재 문제 인덱스 저장
   - 마지막 업데이트 시간 기록
   - 진행상황 복원 기능

2. **홈페이지 통계 연동**
   - 대분류 학습 통계를 홈페이지에 반영
   - 전체 통계와 카테고리별 통계 통합
   - 실시간 업데이트

## 📊 **UI/UX 개선사항**

### **대분류 학습 페이지**
- 4개 카테고리 카드로 단순화
- 각 카테고리별 실시간 통계 표시
- 카테고리별 문제 수 표시
- 진행상황 시각화 (프로그레스 바)

### **기본학습 페이지 (카테고리 모드)**
- 현재 카테고리 정보 표시
- 카테고리별 진행상황 표시
- 카테고리별 이어풀기 기능
- 카테고리별 통계 박스

## 🧪 **테스트 계획**

### **기능 테스트**
1. **카테고리 선택 테스트**
   - 각 카테고리별 문제 로딩 확인
   - 카테고리별 문제 수 정확성 확인

2. **통계 추적 테스트**
   - 카테고리별 풀이 문제 수 정확성
   - 정답률 계산 정확성
   - 일별 통계 업데이트 확인

3. **이어풀기 테스트**
   - 카테고리별 진행상황 저장
   - 진행상황 복원 정확성
   - 페이지 새로고침 후 데이터 유지

### **통합 테스트**
1. **홈페이지 연동 테스트**
   - 대분류 학습 통계가 홈페이지에 반영
   - 전체 통계와 카테고리별 통계 일치성

2. **데이터 일관성 테스트**
   - LocalStorage 데이터 구조 정확성
   - 카테고리별 데이터 분리 정확성

## 📅 **개발 일정**

### **Day 1: Phase 1-2**
- 대분류 학습 페이지 메뉴 수정
- 카테고리별 문제 필터링 구현
- 기본학습 페이지 통합

### **Day 2: Phase 3-4**
- 카테고리별 통계 시스템 구현
- 이어풀기 기능 구현
- 통합 테스트 및 디버깅

## 🎯 **성공 기준**

### **기능적 기준**
- ✅ 4개 카테고리 메뉴 정상 작동
- ✅ 카테고리별 문제 정확히 로딩
- ✅ 카테고리별 통계 정확히 추적
- ✅ 이어풀기 기능 정상 작동
- ✅ 홈페이지 통계 연동 정상

### **성능적 기준**
- ✅ 문제 로딩 시간 3초 이내
- ✅ 통계 업데이트 실시간 반영
- ✅ 데이터 일관성 100% 보장

## 📁 **핵심 파일 목록**

### **수정 대상 파일**
1. `templates/large_category_learning.html` - 대분류 학습 페이지
2. `templates/basic_learning.html` - 기본학습 페이지 (카테고리 모드 지원)
3. `static/js/basic_learning_main.js` - 기본학습 JavaScript (카테고리별 로직 추가)
4. `templates/home.html` - 홈페이지 (대분류 통계 표시)

### **신규 생성 파일**
1. `static/js/category_learning.js` - 카테고리별 학습 전용 JavaScript
2. `static/js/category_statistics.js` - 카테고리별 통계 관리 JavaScript

---

**작성일**: 2025년 8월 14일  
**작성자**: 서대리  
**버전**: v1.0  
**상태**: 계획 완료 ✅
