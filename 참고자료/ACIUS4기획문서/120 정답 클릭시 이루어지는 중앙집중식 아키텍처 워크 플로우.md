새로운 UI에서 데이터가 생성되고 중앙아키텍처를 통해 화면이 업데이트되는 과정을 단계별로 설명드리겠습니다.

## �� 데이터 생성부터 화면 업데이트까지의 전체 과정

### **1단계: 문제 풀이 모듈에서 사용자 액션**
```
사용자가 문제를 풀고 "정답확인" 버튼 클릭
↓
문제풀이 모듈에서 이벤트 발생
```

### **2단계: 데이터 수집 및 중앙 저장**
```javascript
// 문제풀이 모듈에서
const quizData = {
    questionId: 123,
    category: '재산보험',
    isCorrect: true,
    userAnswer: 'A',
    correctAnswer: 'A',
    timestamp: new Date().toISOString()
};

// 중앙 데이터 관리자로 전송
CentralDataManager.handleQuizCompleted(quizData);
```

### **3단계: 중앙 데이터 관리자 처리**
```javascript
// CentralDataManager.handleQuizCompleted()
1. saveQuizResult(quizData)        // 문제 풀이 결과 저장
2. updateCategoryStatistics(quizData)  // 카테고리별 통계 업데이트
3. updateRealTimeData(quizData)    // 실시간 데이터 업데이트
4. recalculatePredictedScores()    // 예상 점수 재계산
5. broadcastDataUpdate()           // 이벤트 브로드캐스트
```

### **4단계: 데이터 저장소 업데이트**
```javascript
// localStorage에 저장되는 데이터들:

// 1. 문제 풀이 결과
aicu_quiz_results: {
    results: [
        {
            questionId: 123,
            category: '재산보험',
            isCorrect: true,
            userAnswer: 'A',
            correctAnswer: 'A',
            timestamp: '2025-08-16T00:56:15.123Z'
        }
    ]
}

// 2. 카테고리별 통계
aicu_category_statistics: {
    categories: {
        "06재산보험": {
            solved: 51,        // 50 → 51로 증가
            correct: 26,       // 25 → 26로 증가
            accuracy: 51.0     // 재계산됨
        }
    }
}

// 3. 실시간 데이터
aicu_real_time_data: {
    total_attempts: 201,       // 200 → 201로 증가
    total_correct: 98,         // 97 → 98로 증가
    overall_accuracy: 48.8     // 재계산됨
}

// 4. 오답 분석 데이터
aicu_incorrect_statistics: {
    question_attempts: {
        "123": {
            attempts: 1,
            incorrect: 0,      // 정답이므로 0
            last_attempt: '2025-08-16T00:56:15.123Z'
        }
    }
}
```

### **5단계: 이벤트 브로드캐스트**
```javascript
// CentralDataManager.broadcastDataUpdate()
document.dispatchEvent(new CustomEvent('dataUpdated', {
    detail: {
        category: '재산보험',
        questionId: 123,
        isCorrect: true,
        newStats: updatedStats
    }
}));
```

### **6단계: 실시간 동기화 매니저 처리**
```javascript
// RealtimeSyncManager가 이벤트를 감지
document.addEventListener('dataUpdated', (event) => {
    const { category, questionId, isCorrect, newStats } = event.detail;
    
    // 모든 UI 컴포넌트 업데이트
    updateAllUIComponents(newStats);
});
```

### **7단계: 현재 화면 UI 업데이트**
```javascript
// 대분류 학습 화면의 여러 숫자들이 동시에 업데이트:

// 1. 카테고리 정보 박스 업데이트
updateCategoryInfoBox('재산보험', {
    progress: '51 / 169 (30.2%)',  // 50/169 → 51/169
    accuracy: '51.0%'              // 50.0% → 51.0%
});

// 2. 문제 풀이 모듈 내 통계 업데이트
updateProblemModuleStats({
    totalSolved: 51,               // 50 → 51
    totalCorrect: 26,              // 25 → 26
    currentAccuracy: '51.0%'       // 50.0% → 51.0%
});

// 3. 예상 점수 업데이트 (있다면)
updatePredictedScore('재산보험', 51.0);  // 50.0 → 51.0

// 4. 전체 통계 업데이트
updateOverallStats({
    totalAttempts: 201,            // 200 → 201
    overallAccuracy: '48.8%'       // 48.5% → 48.8%
});
```

### **8단계: 다른 페이지도 동시 업데이트**
```javascript
// 홈페이지의 예상 점수도 동시에 업데이트
// (홈페이지가 열려있다면)
updateHomePagePredictedScores({
    '재산보험': 51.0,              // 50.0 → 51.0
    '특종보험': 45.2,
    '배상책임보험': 38.1,
    '해상보험': 42.8
});

// 합격 확률도 재계산
updatePassProbability(44.5);       // 44.2% → 44.5%
```

## �� 핵심 포인트

### **1. 단일 진실 소스 (Single Source of Truth)**
- 모든 데이터는 `CentralDataManager`에서 관리
- 문제 풀이 결과가 모든 통계의 출발점

### **2. 실시간 동기화**
- 한 곳에서 데이터 변경 → 모든 UI 즉시 업데이트
- 페이지 전환 없이 실시간 반영

### **3. 이벤트 기반 아키텍처**
- `dataUpdated` 이벤트로 모든 컴포넌트에 알림
- 느슨한 결합으로 유지보수성 향상

### **4. 데이터 일관성 보장**
- 모든 통계가 동일한 데이터 소스 사용
- 중복 계산 방지

이 과정을 통해 사용자가 "정답확인"을 누르는 순간, 모든 관련 숫자들이 실시간으로 정확하게 업데이트됩니다!