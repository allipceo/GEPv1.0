# 98_등록시점기반통계시스템_개발_계획서

## 📋 **프로젝트 개요**

### **목적**
- 게스트/실사용자 등록 시점을 기준으로 한 누적 통계 시스템 구축
- LocalStorage 기반 실시간 통계 수집 및 표시
- 등록 시점부터 설정 초기화 전까지 모든 학습 데이터 누적

### **개발 버전**
- **현재 버전**: v3.6
- **목표 버전**: v3.7 (등록 시점 기반 통계 시스템)

## 🎯 **핵심 요구사항**

### **1. 등록 시점 기준 통계**
- **등록 시점**: 통계 시작점 (타임스탬프 저장)
- **누적 기간**: 등록 시점 ~ 설정 초기화 전까지
- **데이터 보존**: 앱 업데이트/재시작에도 유지

### **2. 실시간 통계 수집**
- **문제 풀이 시**: 문제ID, 답안, 정답여부, 소요시간 기록
- **정답 확인 시**: 정답률, 누적 카운트 즉시 업데이트
- **학습 시간**: 문제별 소요시간 측정 및 누적

### **3. 통계 표시**
- **대문 페이지**: 등록 시점부터의 누적 통계
- **기본학습 페이지**: 실시간 진행상황 및 통계
- **통계 페이지**: 상세 분석 및 차트

## 🏗️ **시스템 아키텍처**

### **LocalStorage 데이터 구조**

#### **1. 사용자 정보 (`aicu_user_data`)**
```javascript
{
  "registration_timestamp": "2025-08-14T06:32:49.123Z",  // 통계 시작점
  "user_type": "guest/registered",
  "name": "조대표",
  "exam_date": "2025-09-13",
  "registration_date": "2025-08-14"
}
```

#### **2. 누적 통계 (`aicu_statistics`)**
```javascript
{
  "registration_timestamp": "2025-08-14T06:32:49.123Z",
  "total_questions_attempted": 0,      // 등록 시점부터 누적
  "total_correct_answers": 0,          // 등록 시점부터 누적
  "total_study_time": 0,               // 등록 시점부터 누적 (분)
  "accuracy_rate": 0,                  // 전체 정답률
  "daily_progress": {                  // 일별 진행상황
    "2025-08-14": { 
      "attempted": 0, 
      "correct": 0, 
      "time": 0,
      "accuracy": 0 
    }
  },
  "last_updated": "2025-08-14T06:32:49.123Z"
}
```

#### **3. 학습 로그 (`aicu_learning_log`)**
```javascript
[
  {
    "timestamp": "2025-08-14T06:45:30.123Z",
    "question_id": "Q001",
    "question_code": "Q001",
    "user_answer": "O",
    "correct_answer": "O",
    "is_correct": true,
    "time_spent": 15,                  // 초 단위
    "category": "06재산보험",
    "session_id": "session_001"
  }
]
```

#### **4. 진행상황 (`aicu_quiz_progress`)**
```javascript
{
  "current_question_index": 10,
  "last_updated": "2025-08-14T06:45:30.123Z"
}
```

#### **5. 대분류 통계 (`aicu_category_statistics`)**
```javascript
{
  "categories": {
    "06재산보험": {
      "total_questions": 169,
      "solved": 0,
      "correct": 0,
      "accuracy": 0,
      "current_question_index": 0,
      "daily_progress": {}
    },
    "07특종보험": {
      "total_questions": 182,
      "solved": 0,
      "correct": 0,
      "accuracy": 0,
      "current_question_index": 0,
      "daily_progress": {}
    },
    "08배상책임보험": {
      "total_questions": 268,
      "solved": 0,
      "correct": 0,
      "accuracy": 0,
      "current_question_index": 0,
      "daily_progress": {}
    },
    "09해상보험": {
      "total_questions": 170,
      "solved": 0,
      "correct": 0,
      "accuracy": 0,
      "current_question_index": 0,
      "daily_progress": {}
    }
  },
  "last_updated": "2025-08-14T06:32:49.123Z"
}
```

## 🔧 **개발 단계**

### **Phase 1: 등록 시점 기반 통계 초기화**
1. **사용자 등록 시 통계 시작점 설정**
   - `registration_timestamp` 저장
   - 기본 통계 구조 생성
   - 초기값 설정

2. **통계 초기화 함수 구현**
   - `initializeUserStatistics()` 함수
   - 등록 시점 기준 통계 구조 생성
   - LocalStorage 저장

### **Phase 2: 실시간 통계 업데이트 시스템**
1. **문제 풀이 이벤트 추적**
   - 문제 표시 시점 기록
   - 답안 선택 시점 기록
   - 정답 확인 시점 기록

2. **통계 업데이트 함수**
   - `updateStatistics()` 함수
   - 실시간 카운트 업데이트
   - 정답률 계산

3. **학습 시간 측정**
   - 문제별 소요시간 측정
   - 누적 학습시간 계산

### **Phase 3: 통계 표시 시스템**
1. **대문 페이지 통계 표시**
   - 등록 시점부터의 누적 통계
   - 실시간 업데이트

2. **기본학습 페이지 통계 표시**
   - 현재 세션 통계
   - 전체 누적 통계

3. **통계 페이지 상세 표시**
   - 일별 진행상황
   - 카테고리별 통계
   - 학습 패턴 분석

## 📊 **통계 지표**

### **기본 지표**
- **총 문제 풀이 수**: 등록 시점부터 누적
- **총 정답 수**: 등록 시점부터 누적
- **전체 정답률**: (총 정답 수 / 총 문제 풀이 수) × 100
- **총 학습 시간**: 등록 시점부터 누적 (분)

### **일별 지표**
- **일별 문제 풀이 수**
- **일별 정답률**
- **일별 학습 시간**
- **연속 학습 일수**

### **카테고리별 지표**
- **카테고리별 문제 풀이 수**
- **카테고리별 정답률**
- **카테고리별 학습 시간**

## 🎨 **UI/UX 개선**

### **대문 페이지**
- **등록 시점 표시**: "등록일: 2025-08-14"
- **누적 통계 카드**: 총 문제 수, 정답률, 학습시간
- **일별 진행상황**: 최근 7일 학습 현황

### **기본학습 페이지**
- **실시간 통계**: 현재 세션 + 전체 누적
- **진행률 표시**: 등록 시점부터의 전체 진행률
- **학습 시간 표시**: 현재 세션 + 총 누적 시간

### **통계 페이지**
- **상세 분석**: 일별, 카테고리별 통계
- **차트 표시**: 진행률, 정답률 트렌드
- **학습 패턴**: 시간대별, 요일별 분석

## 🔄 **데이터 동기화**

### **실시간 업데이트**
- **문제 풀이 시**: 즉시 통계 업데이트
- **페이지 이동 시**: 통계 데이터 로드
- **앱 재시작 시**: 등록 시점부터 통계 복원

### **데이터 보존**
- **LocalStorage**: 브라우저 종료 후에도 유지
- **등록 시점 기준**: 설정 초기화 전까지 누적
- **앱 업데이트**: 통계 데이터 유지

## 🧪 **테스트 계획**

### **기능 테스트**
1. **등록 시점 설정 테스트**
   - 게스트 등록 시 통계 시작점 확인
   - 실제 사용자 등록 시 통계 시작점 확인

2. **통계 업데이트 테스트**
   - 문제 풀이 시 통계 업데이트 확인
   - 정답/오답 카운트 확인
   - 학습 시간 측정 확인

3. **통계 표시 테스트**
   - 대문 페이지 통계 표시 확인
   - 기본학습 페이지 통계 표시 확인
   - 통계 페이지 상세 표시 확인

### **데이터 보존 테스트**
1. **앱 재시작 테스트**
   - 브라우저 종료 후 재시작 시 통계 유지 확인
   - 등록 시점부터의 누적 데이터 확인

2. **앱 업데이트 테스트**
   - 앱 버전 업데이트 후 통계 데이터 유지 확인

## 📅 **개발 일정**

### **1일차: Phase 1 (등록 시점 기반 통계 초기화)**
- 사용자 등록 시 통계 시작점 설정
- 기본 통계 구조 생성
- 초기화 함수 구현

### **2일차: Phase 2 (실시간 통계 업데이트)**
- 문제 풀이 이벤트 추적
- 통계 업데이트 함수 구현
- 학습 시간 측정 시스템

### **3일차: Phase 3 (통계 표시 시스템)**
- 대문 페이지 통계 표시
- 기본학습 페이지 통계 표시
- 통계 페이지 상세 표시

### **4일차: 테스트 및 최적화**
- 기능 테스트
- 데이터 보존 테스트
- UI/UX 최적화

## 🎯 **성공 기준**

### **기능적 기준**
- ✅ 등록 시점부터 모든 학습 데이터 누적
- ✅ 실시간 통계 업데이트 및 표시
- ✅ 설정 초기화 전까지 데이터 보존
- ✅ 앱 업데이트/재시작 후에도 통계 유지

### **사용자 경험 기준**
- ✅ 직관적인 통계 표시
- ✅ 실시간 피드백
- ✅ 학습 동기 부여 효과

### **기술적 기준**
- ✅ LocalStorage 효율적 활용
- ✅ 메모리 사용량 최적화
- ✅ 성능 저하 없음

---

**작성일**: 2025년 8월 14일  
**작성자**: 서대리  
**버전**: v1.0
